import{s as le,n as W,d,i as L,y as X,k as Y,E as re,p as se,C as ae,F as Z,b as n,z as O,o as a,c as f,e as E,A as q,g as P,h as p,j as M,a as oe,f as F,t as j}from"../chunks/qLIpCCSV.js";import{S as ne,i as ie}from"../chunks/Bpqo0lwe.js";import{g as $}from"../chunks/sTQiEMwh.js";import{l as ce}from"../chunks/WlDbmOKK.js";import{p as ue}from"../chunks/4srO1X8Q.js";import"../chunks/WhpeioxD.js";function ee(s){let t,e,l,r='<h3 id="modal-title" class="text-lg font-bold text-black">File Search</h3> <p>For files in Awaiting Search</p>',b,u,C,h,I,_,v,N="File Number",S,m,D,x,g,o="Cancel",T,y,B,J,i=s[3]&&te(s);function K(c,w){return c[2]?fe:de}let A=K(s),k=A(s);return{c(){t=p("div"),e=p("div"),l=p("div"),l.innerHTML=r,b=M(),u=p("div"),i&&i.c(),C=M(),h=p("div"),I=p("div"),_=p("div"),v=p("label"),v.textContent=N,S=M(),m=p("input"),D=M(),x=p("div"),g=p("button"),g.textContent=o,T=M(),y=p("button"),k.c(),this.h()},l(c){t=f(c,"DIV",{class:!0,role:!0});var w=E(t);e=f(w,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var V=E(e);l=f(V,"DIV",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-129p6rz"&&(l.innerHTML=r),b=P(V),u=f(V,"DIV",{class:!0});var z=E(u);i&&i.l(z),C=P(z),h=f(z,"DIV",{class:!0});var Q=E(h);I=f(Q,"DIV",{class:!0});var G=E(I);_=f(G,"DIV",{class:!0});var H=E(_);v=f(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(v)!=="svelte-pel2ds"&&(v.textContent=N),S=P(H),m=f(H,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),H.forEach(d),G.forEach(d),Q.forEach(d),z.forEach(d),D=P(V),x=f(V,"DIV",{class:!0});var U=E(x);g=f(U,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),q(g)!=="svelte-18i36xv"&&(g.textContent=o),T=P(U),y=f(U,"BUTTON",{type:!0,class:!0});var R=E(y);k.l(R),R.forEach(d),U.forEach(d),V.forEach(d),w.forEach(d),this.h()},h(){a(l,"class","border-b px-6 py-4"),a(v,"for","search-query"),a(v,"class","block text-sm font-medium text-gray-700 mb-1"),a(m,"id","search-query"),a(m,"type","text"),a(m,"placeholder","Enter file number"),a(m,"class","w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),a(_,"class","w-full md:w-3/3"),a(I,"class","flex flex-col md:flex-row gap-3"),a(h,"class","space-y-4 mx-auto"),a(u,"class","p-6"),a(g,"type","button"),a(g,"class","px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),a(y,"type","button"),y.disabled=s[2],a(y,"class","px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed"),a(x,"class","px-6 py-4 bg-gray-50 border-t rounded-b-lg flex justify-end space-x-3"),a(e,"class","modal-content bg-white rounded-lg shadow-xl w-full max-w-md mx-auto"),a(e,"role","dialog"),a(e,"aria-modal","true"),a(e,"aria-labelledby","modal-title"),a(t,"class","modal-overlay fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"),a(t,"role","presentation")},m(c,w){L(c,t,w),n(t,e),n(e,l),n(e,b),n(e,u),i&&i.m(u,null),n(u,C),n(u,h),n(h,I),n(I,_),n(_,v),n(_,S),n(_,m),Z(m,s[1]),n(e,D),n(e,x),n(x,g),n(x,T),n(x,y),k.m(y,null),B||(J=[O(m,"input",s[8]),O(g,"click",s[4]),O(y,"click",s[6]),O(t,"click",s[5]),O(t,"keydown",s[7])],B=!0)},p(c,w){c[3]?i?i.p(c,w):(i=te(c),i.c(),i.m(u,C)):i&&(i.d(1),i=null),w&2&&m.value!==c[1]&&Z(m,c[1]),A!==(A=K(c))&&(k.d(1),k=A(c),k&&(k.c(),k.m(y,null))),w&4&&(y.disabled=c[2])},d(c){c&&d(t),i&&i.d(),k.d(),B=!1,ae(J)}}}function te(s){let t,e;return{c(){t=p("div"),e=j(s[3]),this.h()},l(l){t=f(l,"DIV",{class:!0});var r=E(t);e=F(r,s[3]),r.forEach(d),this.h()},h(){a(t,"class","mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm")},m(l,r){L(l,t,r),n(t,e)},p(l,r){r&8&&oe(e,l[3])},d(l){l&&d(t)}}}function de(s){let t;return{c(){t=j("Search")},l(e){t=F(e,"Search")},m(e,l){L(e,t,l)},d(e){e&&d(t)}}}function fe(s){let t,e='<svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>',l;return{c(){t=p("span"),t.innerHTML=e,l=j(`\r
						Searching...`),this.h()},l(r){t=f(r,"SPAN",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-1fx6cor"&&(t.innerHTML=e),l=F(r,`\r
						Searching...`),this.h()},h(){a(t,"class","inline-block mr-2")},m(r,b){L(r,t,b),L(r,l,b)},d(r){r&&(d(t),d(l))}}}function pe(s){let t,e=s[0]&&ee(s);return{c(){e&&e.c(),t=X()},l(l){e&&e.l(l),t=X()},m(l,r){e&&e.m(l,r),L(l,t,r)},p(l,[r]){l[0]?e?e.p(l,r):(e=ee(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:W,o:W,d(l){l&&d(t),e&&e.d(l)}}}function me(s,t,e){let l,r;Y(s,ce,o=>e(12,l=o)),Y(s,ue,o=>e(13,r=o));let{isOpen:b=!1}=t,u="",C=!1,h=null,I=null,_=null;const v=re();let N;se(async()=>{N=r.url.searchParams.get("type")??"",e(0,b=!0)});function S(){v("close"),$("/home/dashboard"),e(0,b=!1)}function m(o){o.target.classList.contains("modal-overlay")&&S()}async function D(){if(!u){e(3,h="Please enter a search term");return}try{e(2,C=!0),e(3,h=null);const o={query:u,fileType:N};sessionStorage.setItem("searchParams",JSON.stringify(o));try{I=l.name,_=l.email,await $("/home/update-files/search/")}catch{e(3,h="Payment failed")}}catch(o){e(3,h=o.message||"An error occurred during search")}finally{e(2,C=!1)}}function x(o){o.key==="Escape"&&S(),o.key==="Enter"&&D()}function g(){u=this.value,e(1,u)}return s.$$set=o=>{"isOpen"in o&&e(0,b=o.isOpen)},[b,u,C,h,S,m,D,x,g]}class xe extends ne{constructor(t){super(),ie(this,t,me,pe,le,{isOpen:0})}}export{xe as component};
