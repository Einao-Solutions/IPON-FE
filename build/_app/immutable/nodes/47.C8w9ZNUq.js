import{s as ye,d,i as A,y as me,E as ge,p as we,C as xe,F as re,K as he,b as a,z as B,o as r,L as ke,c,e as b,A as F,g as D,f as G,h as u,j as V,t as W,M as Ce,a as Ee}from"../chunks/qLIpCCSV.js";import{S as Te,i as Ie,t as ae,a as Y,c as Se,d as Le,m as De,e as Ve,f as Me,g as Pe}from"../chunks/Bpqo0lwe.js";import{g as be}from"../chunks/sTQiEMwh.js";import{b as Ne}from"../chunks/DvhB1z8p.js";import{I as Oe}from"../chunks/DxaiNGYP.js";function _e(o){let l,t,e,s='<h3 class="text-lg font-bold text-black">Publication Status Update</h3> <p>Search for the File</p>',i,m,h,S,_,v,w,H="File Number or RTM:",U,f,M,x,L,oe="File Type",X,y,E,ne="Trademark",Z,k,P,N,$,ee,T,ie="Cancel",te,g,j,le,ce,p=o[4]&&ve(o);N=new Oe({props:{icon:"mdi:information-variant-circle",class:"mr-2 text-blue-500",style:"font-size: 1.3em;"}});function ue(n,C){return n[3]?Fe:ze}let q=ue(o),I=q(o);return{c(){l=u("div"),t=u("div"),e=u("div"),e.innerHTML=s,i=V(),m=u("div"),p&&p.c(),h=V(),S=u("div"),_=u("div"),v=u("div"),w=u("label"),w.textContent=H,U=V(),f=u("input"),M=V(),x=u("div"),L=u("label"),L.textContent=oe,X=V(),y=u("select"),E=u("option"),E.textContent=ne,Z=V(),k=u("div"),P=u("span"),Me(N.$$.fragment),$=W(`\r
                    Only files with status of publication can undergo publication status update.`),ee=V(),T=u("button"),T.textContent=ie,te=V(),g=u("button"),I.c(),this.h()},l(n){l=c(n,"DIV",{class:!0,role:!0});var C=b(l);t=c(C,"DIV",{class:!0,role:!0,"aria-modal":!0});var O=b(t);e=c(O,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-wdnylk"&&(e.innerHTML=s),i=D(O),m=c(O,"DIV",{class:!0});var R=b(m);p&&p.l(R),h=D(R),S=c(R,"DIV",{class:!0});var fe=b(S);_=c(fe,"DIV",{class:!0});var K=b(_);v=c(K,"DIV",{class:!0});var J=b(v);w=c(J,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(w)!=="svelte-7i0out"&&(w.textContent=H),U=D(J),f=c(J,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),J.forEach(d),M=D(K),x=c(K,"DIV",{class:!0});var Q=b(x);L=c(Q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(L)!=="svelte-obumws"&&(L.textContent=oe),X=D(Q),y=c(Q,"SELECT",{id:!0,class:!0});var de=b(y);E=c(de,"OPTION",{"data-svelte-h":!0}),F(E)!=="svelte-ijrak8"&&(E.textContent=ne),de.forEach(d),Q.forEach(d),K.forEach(d),fe.forEach(d),R.forEach(d),Z=D(O),k=c(O,"DIV",{class:!0});var z=b(k);P=c(z,"SPAN",{class:!0});var se=b(P);Ve(N.$$.fragment,se),$=G(se,`\r
                    Only files with status of publication can undergo publication status update.`),se.forEach(d),ee=D(z),T=c(z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),F(T)!=="svelte-1h9hdz1"&&(T.textContent=ie),te=D(z),g=c(z,"BUTTON",{type:!0,class:!0});var pe=b(g);I.l(pe),pe.forEach(d),z.forEach(d),O.forEach(d),C.forEach(d),this.h()},h(){r(e,"class","border-b px-6 py-4"),r(w,"for","search-query"),r(w,"class","block text-sm font-medium text-gray-700 mb-1"),r(f,"id","search-query"),r(f,"type","text"),r(f,"placeholder","Enter file number or RTM number"),r(f,"class","w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),r(v,"class","w-full md:w-2/3"),r(L,"for","file-type"),r(L,"class","block text-sm font-medium text-gray-700 mb-1"),E.__value="trademark",re(E,E.__value),r(y,"id","file-type"),r(y,"class","border rounded w-full p-2"),o[2]===void 0&&ke(()=>o[9].call(y)),r(x,"class","w-full md:w-1/3"),r(_,"class","flex flex-col md:flex-row gap-3"),r(S,"class","space-y-4 mx-auto"),r(m,"class","p-6"),r(P,"class","flex items-center text-xs text-gray-600"),r(T,"type","button"),r(T,"class","px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"),r(g,"type","button"),g.disabled=o[3],r(g,"class","px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:bg-blue-400"),r(k,"class","px-6 py-4 bg-gray-50 border-t rounded-b-lg flex justify-end space-x-3"),r(t,"class","modal-content bg-white rounded-lg shadow-xl w-full max-w-md mx-auto"),r(t,"role","dialog"),r(t,"aria-modal","true"),r(l,"class","modal-overlay fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"),r(l,"role","presentation")},m(n,C){A(n,l,C),a(l,t),a(t,e),a(t,i),a(t,m),p&&p.m(m,null),a(m,h),a(m,S),a(S,_),a(_,v),a(v,w),a(v,U),a(v,f),re(f,o[1]),a(_,M),a(_,x),a(x,L),a(x,X),a(x,y),a(y,E),he(y,o[2],!0),a(t,Z),a(t,k),a(k,P),De(N,P,null),a(P,$),a(k,ee),a(k,T),a(k,te),a(k,g),I.m(g,null),j=!0,le||(ce=[B(f,"input",o[8]),B(y,"change",o[9]),B(T,"click",o[5]),B(g,"click",o[6]),B(l,"keydown",o[7])],le=!0)},p(n,C){n[4]?p?p.p(n,C):(p=ve(n),p.c(),p.m(m,h)):p&&(p.d(1),p=null),C&2&&f.value!==n[1]&&re(f,n[1]),C&4&&he(y,n[2]),q!==(q=ue(n))&&(I.d(1),I=q(n),I&&(I.c(),I.m(g,null))),(!j||C&8)&&(g.disabled=n[3])},i(n){j||(Y(N.$$.fragment,n),j=!0)},o(n){ae(N.$$.fragment,n),j=!1},d(n){n&&d(l),p&&p.d(),Le(N),I.d(),le=!1,xe(ce)}}}function ve(o){let l,t;return{c(){l=u("div"),t=W(o[4]),this.h()},l(e){l=c(e,"DIV",{class:!0});var s=b(l);t=G(s,o[4]),s.forEach(d),this.h()},h(){r(l,"class","mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm")},m(e,s){A(e,l,s),a(l,t)},p(e,s){s&16&&Ee(t,e[4])},d(e){e&&d(l)}}}function ze(o){let l;return{c(){l=W("Search")},l(t){l=G(t,"Search")},m(t,e){A(t,l,e)},d(t){t&&d(l)}}}function Fe(o){let l,t='<svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>',e;return{c(){l=u("span"),l.innerHTML=t,e=W(`\r
                        Searching...`),this.h()},l(s){l=c(s,"SPAN",{class:!0,"data-svelte-h":!0}),F(l)!=="svelte-zf5ghl"&&(l.innerHTML=t),e=G(s,`\r
                        Searching...`),this.h()},h(){r(l,"class","inline-block mr-2")},m(s,i){A(s,l,i),A(s,e,i)},d(s){s&&(d(l),d(e))}}}function Ae(o){let l,t,e=o[0]&&_e(o);return{c(){e&&e.c(),l=me()},l(s){e&&e.l(s),l=me()},m(s,i){e&&e.m(s,i),A(s,l,i),t=!0},p(s,[i]){s[0]?e?(e.p(s,i),i&1&&Y(e,1)):(e=_e(s),e.c(),Y(e,1),e.m(l.parentNode,l)):e&&(Pe(),ae(e,1,1,()=>{e=null}),Se())},i(s){t||(Y(e),t=!0)},o(s){ae(e),t=!1},d(s){s&&d(l),e&&e.d(s)}}}function Ue(o,l,t){let e=!1,s="",i="trademark",m=!1,h=null;const S=ge();we(()=>{t(0,e=!0)});function _(){S("close"),be("/home/dashboard"),t(0,e=!1)}async function v(){if(!s){t(4,h="Please enter a file number");return}if(!i){t(4,h="Please select a file type");return}t(3,m=!0),t(4,h=null);try{const f=await fetch(`${Ne}/api/files/files/${encodeURIComponent(s.trim())}/type`),M=await f.json();if(!f.ok){t(4,h=M.message||"File not found."),t(3,m=!1);return}if(M.type.toLowerCase()!==i.toLowerCase()){t(4,h=`File type mismatch. You selected "${i}", but file is "${M.type}".`),t(3,m=!1);return}const x={query:s,fileType:i};sessionStorage.setItem("pubStatusSearchParams",JSON.stringify(x)),await be("/home/publications/publicationstatusupdate/search/")}catch{t(4,h="Error checking file type.")}finally{t(3,m=!1)}}function w(f){f.key==="Escape"&&_(),f.key==="Enter"&&v()}function H(){s=this.value,t(1,s)}function U(){i=Ce(this),t(2,i)}return[e,s,i,m,h,_,v,w,H,U]}class Ke extends Te{constructor(l){super(),Ie(this,l,Ue,Ae,ye,{})}}export{Ke as component};
