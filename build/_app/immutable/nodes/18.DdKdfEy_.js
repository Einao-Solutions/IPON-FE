import{S as le,i as re,s as se,n as W,d,b as V,I as X,l as Y,O as ae,A as ne,M as oe,P as Z,c as o,J as O,x as a,e as f,f as E,K as B,h as L,j as p,k as M,a as ie,g as z,t as F}from"../chunks/Cccy056x.js";import"../chunks/IHki7fMi.js";import{g as $}from"../chunks/DbPk4SB2.js";import{l as ce}from"../chunks/DA3sRRUG.js";import{p as ue}from"../chunks/Q_Idguj-.js";import"../chunks/WhpeioxD.js";function ee(s){let t,e,l,r='<h3 id="modal-title" class="text-lg font-bold text-black">File Search</h3> <p>Please enter the File Number you want to search</p>',b,u,C,h,I,_,v,N="File Number",S,m,D,x,g,n="Cancel",P,y,j,J,i=s[3]&&te(s);function K(c,w){return c[2]?fe:de}let A=K(s),k=A(s);return{c(){t=p("div"),e=p("div"),l=p("div"),l.innerHTML=r,b=M(),u=p("div"),i&&i.c(),C=M(),h=p("div"),I=p("div"),_=p("div"),v=p("label"),v.textContent=N,S=M(),m=p("input"),D=M(),x=p("div"),g=p("button"),g.textContent=n,P=M(),y=p("button"),k.c(),this.h()},l(c){t=f(c,"DIV",{class:!0,role:!0});var w=E(t);e=f(w,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var T=E(e);l=f(T,"DIV",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-1slp6um"&&(l.innerHTML=r),b=L(T),u=f(T,"DIV",{class:!0});var H=E(u);i&&i.l(H),C=L(H),h=f(H,"DIV",{class:!0});var Q=E(h);I=f(Q,"DIV",{class:!0});var G=E(I);_=f(G,"DIV",{class:!0});var U=E(_);v=f(U,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),B(v)!=="svelte-pel2ds"&&(v.textContent=N),S=L(U),m=f(U,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),U.forEach(d),G.forEach(d),Q.forEach(d),H.forEach(d),D=L(T),x=f(T,"DIV",{class:!0});var q=E(x);g=f(q,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(g)!=="svelte-18i36xv"&&(g.textContent=n),P=L(q),y=f(q,"BUTTON",{type:!0,class:!0});var R=E(y);k.l(R),R.forEach(d),q.forEach(d),T.forEach(d),w.forEach(d),this.h()},h(){a(l,"class","border-b px-6 py-4"),a(v,"for","search-query"),a(v,"class","block text-sm font-medium text-gray-700 mb-1"),a(m,"id","search-query"),a(m,"type","text"),a(m,"placeholder","Enter file number"),a(m,"class","w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),a(_,"class","w-full md:w-3/3"),a(I,"class","flex flex-col md:flex-row gap-3"),a(h,"class","space-y-4 mx-auto"),a(u,"class","p-6"),a(g,"type","button"),a(g,"class","px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),a(y,"type","button"),y.disabled=s[2],a(y,"class","px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed"),a(x,"class","px-6 py-4 bg-gray-50 border-t rounded-b-lg flex justify-end space-x-3"),a(e,"class","modal-content bg-white rounded-lg shadow-xl w-full max-w-md mx-auto"),a(e,"role","dialog"),a(e,"aria-modal","true"),a(e,"aria-labelledby","modal-title"),a(t,"class","modal-overlay fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"),a(t,"role","presentation")},m(c,w){V(c,t,w),o(t,e),o(e,l),o(e,b),o(e,u),i&&i.m(u,null),o(u,C),o(u,h),o(h,I),o(I,_),o(_,v),o(_,S),o(_,m),Z(m,s[1]),o(e,D),o(e,x),o(x,g),o(x,P),o(x,y),k.m(y,null),j||(J=[O(m,"input",s[8]),O(g,"click",s[4]),O(y,"click",s[6]),O(t,"click",s[5]),O(t,"keydown",s[7])],j=!0)},p(c,w){c[3]?i?i.p(c,w):(i=te(c),i.c(),i.m(u,C)):i&&(i.d(1),i=null),w&2&&m.value!==c[1]&&Z(m,c[1]),A!==(A=K(c))&&(k.d(1),k=A(c),k&&(k.c(),k.m(y,null))),w&4&&(y.disabled=c[2])},d(c){c&&d(t),i&&i.d(),k.d(),j=!1,oe(J)}}}function te(s){let t,e;return{c(){t=p("div"),e=F(s[3]),this.h()},l(l){t=f(l,"DIV",{class:!0});var r=E(t);e=z(r,s[3]),r.forEach(d),this.h()},h(){a(t,"class","mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm")},m(l,r){V(l,t,r),o(t,e)},p(l,r){r&8&&ie(e,l[3])},d(l){l&&d(t)}}}function de(s){let t;return{c(){t=F("Search")},l(e){t=z(e,"Search")},m(e,l){V(e,t,l)},d(e){e&&d(t)}}}function fe(s){let t,e='<svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>',l;return{c(){t=p("span"),t.innerHTML=e,l=F(`\r
						Searching...`),this.h()},l(r){t=f(r,"SPAN",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-1fx6cor"&&(t.innerHTML=e),l=z(r,`\r
						Searching...`),this.h()},h(){a(t,"class","inline-block mr-2")},m(r,b){V(r,t,b),V(r,l,b)},d(r){r&&(d(t),d(l))}}}function pe(s){let t,e=s[0]&&ee(s);return{c(){e&&e.c(),t=X()},l(l){e&&e.l(l),t=X()},m(l,r){e&&e.m(l,r),V(l,t,r)},p(l,[r]){l[0]?e?e.p(l,r):(e=ee(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:W,o:W,d(l){l&&d(t),e&&e.d(l)}}}function me(s,t,e){let l,r;Y(s,ce,n=>e(12,l=n)),Y(s,ue,n=>e(13,r=n));let{isOpen:b=!1}=t,u="",C=!1,h=null,I=null,_=null;const v=ae();let N;ne(async()=>{N=r.url.searchParams.get("type")??"",e(0,b=!0)});function S(){v("close"),$("/home/dashboard"),e(0,b=!1)}function m(n){n.target.classList.contains("modal-overlay")&&S()}async function D(){if(!u){e(3,h="Please enter a search term");return}try{e(2,C=!0),e(3,h=null);const n={query:u,fileType:N};sessionStorage.setItem("searchParams",JSON.stringify(n));try{I=l.name,_=l.email,await $("/home/claim-files/search/")}catch{e(3,h="Payment failed")}}catch(n){e(3,h=n.message||"An error occurred during search")}finally{e(2,C=!1)}}function x(n){n.key==="Escape"&&S(),n.key==="Enter"&&D()}function g(){u=this.value,e(1,u)}return s.$$set=n=>{"isOpen"in n&&e(0,b=n.isOpen)},[b,u,C,h,S,m,D,x,g]}class xe extends le{constructor(t){super(),re(this,t,me,pe,se,{isOpen:0})}}export{xe as component};
