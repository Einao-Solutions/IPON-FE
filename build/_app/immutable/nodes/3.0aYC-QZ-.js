import{S as lt,i as rt,s as at,m as $e,o as me,d as $,p as C,q as S,r as k,u as _e,v as oe,w as A,b as d,x as z,y,h as N,e as V,f as G,z as R,k as O,j as L,l as Q,A as ft,n as Ue,B as it,C as ut,D as ct,E as pt,F as se,c as J,G as $t,a as je,H as le,g as B,t as U,I as re,J as mt}from"../chunks/Cccy056x.js";import{e as ke}from"../chunks/ByixyIeQ.js";import"../chunks/IHki7fMi.js";import"../chunks/Mi5ChQ-_.js";import{R as Se,D as Ye}from"../chunks/Tp6w8__K.js";import{R as _t,T as gt,D as dt,a as bt}from"../chunks/DdutqK-d.js";import{g as ve}from"../chunks/DbPk4SB2.js";import{p as ht,C as Te,a as De,g as Ie,m as ae,b as fe}from"../chunks/DrUOu03n.js";import{T as wt}from"../chunks/CXG556D5.js";import{w as Ce}from"../chunks/Bx4tD3iK.js";import{b as pe,U as ie,F as Ae,A as X}from"../chunks/kzloY8Fw.js";import{p as kt}from"../chunks/Q_Idguj-.js";import{l as ye,a as ne,n as St,b as vt,f as Tt,c as Dt,d as It,s as Ct,v as At,e as yt,g as Re,q as Rt}from"../chunks/DA3sRRUG.js";import{$ as Pt}from"../chunks/BqrBv-4G.js";import{I as qe}from"../chunks/DQ1KgJGZ.js";import{S as Nt}from"../chunks/BY4KOlQW.js";import{t as ee}from"../chunks/rg3ioSbs.js";import{d as Ot}from"../chunks/wXhWW5a2.js";import"../chunks/BbVspNW5.js";import"../chunks/R6lDc60d.js";import"../chunks/D4QbBJvT.js";import"../chunks/xJp9Kd2E.js";import{B as K}from"../chunks/BCzZLC02.js";import{D as He,a as Ve}from"../chunks/Djc1-W0q.js";import{D as Le}from"../chunks/BMHTdNsM.js";import{D as Me}from"../chunks/DtBQLE6u.js";function Pe(l,e,n){const t=l.slice();return t[46]=e[n],t}function Et(l){let e;return{c(){e=U("Treat Application")},l(n){e=B(n,"Treat Application")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function Bt(l){let e;return{c(){e=U("Select new status")},l(n){e=B(n,"Select new status")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function Ut(l){let e,n,t,s;return e=new Ve({props:{$$slots:{default:[Et]},$$scope:{ctx:l}}}),t=new Me({props:{$$slots:{default:[Bt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment),n=O(),R(t.$$.fragment)},l(o){y(e.$$.fragment,o),n=N(o),y(t.$$.fragment,o)},m(o,a){A(e,o,a),d(o,n,a),A(t,o,a),s=!0},p(o,a){const i={};a[1]&64&&(i.$$scope={dirty:a,ctx:o}),e.$set(i);const b={};a[1]&64&&(b.$$scope={dirty:a,ctx:o}),t.$set(b)},i(o){s||(k(e.$$.fragment,o),k(t.$$.fragment,o),s=!0)},o(o){S(e.$$.fragment,o),S(t.$$.fragment,o),s=!1},d(o){o&&$(n),C(e,o),C(t,o)}}}function jt(l){let e;return{c(){e=U("Availability Search")},l(n){e=B(n,"Availability Search")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function Yt(l){let e;function n(o,a){return jt}let s=n()(l);return{c(){s.c(),e=re()},l(o){s.l(o),e=re()},m(o,a){s.m(o,a),d(o,e,a)},p:Ue,d(o){o&&$(e),s.d(o)}}}function Ne(l){let e,n,t=ae(l[46])+"",s,o,a,i,b;function T(){return l[25](l[46])}return{c(){e=L("button"),n=L("p"),s=U(t),o=O(),this.h()},l(w){e=V(w,"BUTTON",{style:!0,class:!0});var g=G(e);n=V(g,"P",{});var P=G(n);s=B(P,t),P.forEach($),o=N(g),g.forEach($),this.h()},h(){le(e,"background-color",l[1]===l[46]?fe(l[46]):"transparent"),z(e,"class",a="border rounded-md flex p-2 flex-grow items-center hover:bg-accent hover:cursor-pointer "+(l[1]===l[46]?"":"bg-none"))},m(w,g){d(w,e,g),J(e,n),J(n,s),J(e,o),i||(b=mt(e,"click",T),i=!0)},p(w,g){l=w,g[0]&8256&&t!==(t=ae(l[46])+"")&&je(s,t),g[0]&8258&&le(e,"background-color",l[1]===l[46]?fe(l[46]):"transparent"),g[0]&8258&&a!==(a="border rounded-md flex p-2 flex-grow items-center hover:bg-accent hover:cursor-pointer "+(l[1]===l[46]?"":"bg-none"))&&z(e,"class",a)},d(w){w&&$(e),i=!1,b()}}}function qt(l){let e;return{c(){e=U("Cancel")},l(n){e=B(n,"Cancel")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function Ht(l){let e;return{c(){e=U("Continue")},l(n){e=B(n,"Continue")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function Vt(l){let e,n,t,s;return e=new K({props:{variant:"outline",$$slots:{default:[qt]},$$scope:{ctx:l}}}),e.$on("click",l[27]),t=new K({props:{disabled:!l[11](),$$slots:{default:[Ht]},$$scope:{ctx:l}}}),t.$on("click",l[28]),{c(){R(e.$$.fragment),n=O(),R(t.$$.fragment)},l(o){y(e.$$.fragment,o),n=N(o),y(t.$$.fragment,o)},m(o,a){A(e,o,a),d(o,n,a),A(t,o,a),s=!0},p(o,a){const i={};a[1]&64&&(i.$$scope={dirty:a,ctx:o}),e.$set(i);const b={};a[0]&2048&&(b.disabled=!o[11]()),a[1]&64&&(b.$$scope={dirty:a,ctx:o}),t.$set(b)},i(o){s||(k(e.$$.fragment,o),k(t.$$.fragment,o),s=!0)},o(o){S(e.$$.fragment,o),S(t.$$.fragment,o),s=!1},d(o){o&&$(n),C(e,o),C(t,o)}}}function Lt(l){let e,n,t,s,o,a,i,b,T,w,g,P,I,h,f;e=new He({props:{$$slots:{default:[Ut]},$$scope:{ctx:l}}}),o=new K({props:{$$slots:{default:[Yt]},$$scope:{ctx:l}}}),o.$on("click",l[21]);let _=ke(Ie(l[6],l[13].type)),m=[];for(let r=0;r<_.length;r+=1)m[r]=Ne(Pe(l,_,r));function c(r){l[26](r)}let D={class:"min-h-[120px]",placeholder:"Enter reason"};return l[2]!==void 0&&(D.value=l[2]),g=new wt({props:D}),$e.push(()=>me(g,"value",c)),h=new Le({props:{class:"sm:flex gap-3",$$slots:{default:[Vt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment),n=O(),t=L("br"),s=O(),R(o.$$.fragment),a=O(),i=L("div");for(let r=0;r<m.length;r+=1)m[r].c();b=O(),T=L("br"),w=O(),R(g.$$.fragment),I=O(),R(h.$$.fragment),this.h()},l(r){y(e.$$.fragment,r),n=N(r),t=V(r,"BR",{}),s=N(r),y(o.$$.fragment,r),a=N(r),i=V(r,"DIV",{class:!0});var u=G(i);for(let v=0;v<m.length;v+=1)m[v].l(u);u.forEach($),b=N(r),T=V(r,"BR",{}),w=N(r),y(g.$$.fragment,r),I=N(r),y(h.$$.fragment,r),this.h()},h(){z(i,"class","gap-2 flex")},m(r,u){A(e,r,u),d(r,n,u),d(r,t,u),d(r,s,u),A(o,r,u),d(r,a,u),d(r,i,u);for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(i,null);d(r,b,u),d(r,T,u),d(r,w,u),A(g,r,u),d(r,I,u),A(h,r,u),f=!0},p(r,u){const v={};u[1]&64&&(v.$$scope={dirty:u,ctx:r}),e.$set(v);const q={};if(u[1]&64&&(q.$$scope={dirty:u,ctx:r}),o.$set(q),u[0]&8258){_=ke(Ie(r[6],r[13].type));let Y;for(Y=0;Y<_.length;Y+=1){const x=Pe(r,_,Y);m[Y]?m[Y].p(x,u):(m[Y]=Ne(x),m[Y].c(),m[Y].m(i,null))}for(;Y<m.length;Y+=1)m[Y].d(1);m.length=_.length}const F={};!P&&u[0]&4&&(P=!0,F.value=r[2],_e(()=>P=!1)),g.$set(F);const Z={};u[0]&2432|u[1]&64&&(Z.$$scope={dirty:u,ctx:r}),h.$set(Z)},i(r){f||(k(e.$$.fragment,r),k(o.$$.fragment,r),k(g.$$.fragment,r),k(h.$$.fragment,r),f=!0)},o(r){S(e.$$.fragment,r),S(o.$$.fragment,r),S(g.$$.fragment,r),S(h.$$.fragment,r),f=!1},d(r){r&&($(n),$(t),$(s),$(a),$(i),$(b),$(T),$(w),$(I)),C(e,r),C(o,r),$t(m,r),C(g,r),C(h,r)}}}function Mt(l){let e,n;return e=new Ye({props:{class:"max-w-fit",$$slots:{default:[Lt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){A(e,t,s),n=!0},p(t,s){const o={};s[0]&10694|s[1]&64&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Ft(l){let e;return{c(){e=U("Confirmation")},l(n){e=B(n,"Confirmation")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function Jt(l){let e;return{c(){e=U("Select new status")},l(n){e=B(n,"Select new status")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function Gt(l){let e,n,t,s;return e=new Ve({props:{$$slots:{default:[Ft]},$$scope:{ctx:l}}}),t=new Me({props:{$$slots:{default:[Jt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment),n=O(),R(t.$$.fragment)},l(o){y(e.$$.fragment,o),n=N(o),y(t.$$.fragment,o)},m(o,a){A(e,o,a),d(o,n,a),A(t,o,a),s=!0},p(o,a){const i={};a[1]&64&&(i.$$scope={dirty:a,ctx:o}),e.$set(i);const b={};a[1]&64&&(b.$$scope={dirty:a,ctx:o}),t.$set(b)},i(o){s||(k(e.$$.fragment,o),k(t.$$.fragment,o),s=!0)},o(o){S(e.$$.fragment,o),S(t.$$.fragment,o),s=!1},d(o){o&&$(n),C(e,o),C(t,o)}}}function Kt(l){let e;return{c(){e=U("Cancel")},l(n){e=B(n,"Cancel")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function zt(l){let e,n,t;return e=new qe({props:{class:l[9]?"":"hidden",icon:"line-md:loading-twotone-loop",width:"1.2rem",height:"1.2rem"}}),{c(){R(e.$$.fragment),n=U(`\r
\r
				Continue`)},l(s){y(e.$$.fragment,s),n=B(s,`\r
\r
				Continue`)},m(s,o){A(e,s,o),d(s,n,o),t=!0},p(s,o){const a={};o[0]&512&&(a.class=s[9]?"":"hidden"),e.$set(a)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){s&&$(n),C(e,s)}}}function Qt(l){let e,n,t,s;return e=new K({props:{variant:"outline",$$slots:{default:[Kt]},$$scope:{ctx:l}}}),e.$on("click",l[30]),t=new K({props:{disabled:l[9],$$slots:{default:[zt]},$$scope:{ctx:l}}}),t.$on("click",l[31]),{c(){R(e.$$.fragment),n=O(),R(t.$$.fragment)},l(o){y(e.$$.fragment,o),n=N(o),y(t.$$.fragment,o)},m(o,a){A(e,o,a),d(o,n,a),A(t,o,a),s=!0},p(o,a){const i={};a[1]&64&&(i.$$scope={dirty:a,ctx:o}),e.$set(i);const b={};a[0]&512&&(b.disabled=o[9]),a[0]&512|a[1]&64&&(b.$$scope={dirty:a,ctx:o}),t.$set(b)},i(o){s||(k(e.$$.fragment,o),k(t.$$.fragment,o),s=!0)},o(o){S(e.$$.fragment,o),S(t.$$.fragment,o),s=!1},d(o){o&&$(n),C(e,o),C(t,o)}}}function Wt(l){let e,n,t,s,o,a,i,b=ae(l[1])+"",T,w,g,P,I,h,f;return e=new He({props:{$$slots:{default:[Gt]},$$scope:{ctx:l}}}),h=new Le({props:{class:"sm:flex gap-3",$$slots:{default:[Qt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment),n=O(),t=L("br"),s=O(),o=L("p"),a=U(`Are you sure you want to update the status to\r
			`),i=L("span"),T=U(b),w=U(" ?"),g=O(),P=L("br"),I=O(),R(h.$$.fragment),this.h()},l(_){y(e.$$.fragment,_),n=N(_),t=V(_,"BR",{}),s=N(_),o=V(_,"P",{});var m=G(o);a=B(m,`Are you sure you want to update the status to\r
			`),i=V(m,"SPAN",{class:!0,style:!0});var c=G(i);T=B(c,b),c.forEach($),w=B(m," ?"),m.forEach($),g=N(_),P=V(_,"BR",{}),I=N(_),y(h.$$.fragment,_),this.h()},h(){z(i,"class","border w-fit p-1 rounded-md"),le(i,"background-color",fe(l[1]))},m(_,m){A(e,_,m),d(_,n,m),d(_,t,m),d(_,s,m),d(_,o,m),J(o,a),J(o,i),J(i,T),J(o,w),d(_,g,m),d(_,P,m),d(_,I,m),A(h,_,m),f=!0},p(_,m){const c={};m[1]&64&&(c.$$scope={dirty:m,ctx:_}),e.$set(c),(!f||m[0]&2)&&b!==(b=ae(_[1])+"")&&je(T,b),(!f||m[0]&2)&&le(i,"background-color",fe(_[1]));const D={};m[0]&768|m[1]&64&&(D.$$scope={dirty:m,ctx:_}),h.$set(D)},i(_){f||(k(e.$$.fragment,_),k(h.$$.fragment,_),f=!0)},o(_){S(e.$$.fragment,_),S(h.$$.fragment,_),f=!1},d(_){_&&($(n),$(t),$(s),$(o),$(g),$(P),$(I)),C(e,_),C(h,_)}}}function Xt(l){let e,n;return e=new Ye({props:{class:"min-w-fit mx-1.5",$$slots:{default:[Wt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){A(e,t,s),n=!0},p(t,s){const o={};s[0]&770|s[1]&64&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Zt(l){var _,m;let e,n,t,s,o,a=(_=l[12].roles)==null?void 0:_.some(l[24]),i,b=((m=l[12].roles)==null?void 0:m.includes(ie.Support))&&l[5].type===Ae.Design,T,w,g;const P=l[23].default,I=it(P,l,l[37],null);s=new K({props:{$$slots:{default:[en]},$$scope:{ctx:l}}}),s.$on("click",l[33]);let h=a&&Oe(l),f=b&&Be(l);return w=new K({props:{$$slots:{default:[an]},$$scope:{ctx:l}}}),w.$on("click",l[36]),{c(){e=L("div"),I&&I.c(),n=O(),t=L("div"),R(s.$$.fragment),o=O(),h&&h.c(),i=O(),f&&f.c(),T=O(),R(w.$$.fragment),this.h()},l(c){e=V(c,"DIV",{class:!0});var D=G(e);I&&I.l(D),D.forEach($),n=N(c),t=V(c,"DIV",{class:!0});var r=G(t);y(s.$$.fragment,r),o=N(r),h&&h.l(r),i=N(r),f&&f.l(r),T=N(r),y(w.$$.fragment,r),r.forEach($),this.h()},h(){z(e,"class","basis-11/12 overflow-y-auto"),z(t,"class","flex justify-between p-4 basis-1/12")},m(c,D){d(c,e,D),I&&I.m(e,null),d(c,n,D),d(c,t,D),A(s,t,null),J(t,o),h&&h.m(t,null),J(t,i),f&&f.m(t,null),J(t,T),A(w,t,null),g=!0},p(c,D){var v,q;I&&I.p&&(!g||D[1]&64)&&ut(I,P,c,c[37],g?pt(P,c[37],D,null):ct(c[37]),null);const r={};D[1]&64&&(r.$$scope={dirty:D,ctx:c}),s.$set(r),D[0]&4096&&(a=(v=c[12].roles)==null?void 0:v.some(c[24])),a?h?(h.p(c,D),D[0]&4096&&k(h,1)):(h=Oe(c),h.c(),k(h,1),h.m(t,i)):h&&(se(),S(h,1,1,()=>{h=null}),oe()),D[0]&4128&&(b=((q=c[12].roles)==null?void 0:q.includes(ie.Support))&&c[5].type===Ae.Design),b?f?(f.p(c,D),D[0]&4128&&k(f,1)):(f=Be(c),f.c(),k(f,1),f.m(t,T)):f&&(se(),S(f,1,1,()=>{f=null}),oe());const u={};D[1]&64&&(u.$$scope={dirty:D,ctx:c}),w.$set(u)},i(c){g||(k(I,c),k(s.$$.fragment,c),k(h),k(f),k(w.$$.fragment,c),g=!0)},o(c){S(I,c),S(s.$$.fragment,c),S(h),S(f),S(w.$$.fragment,c),g=!1},d(c){c&&($(e),$(n),$(t)),I&&I.d(c),C(s),h&&h.d(),f&&f.d(),C(w)}}}function xt(l){let e,n,t;return n=new qe({props:{class:"mx-auto my-auto",icon:"line-md:loading-twotone-loop",width:"1.2rem",height:"1.2rem"}}),{c(){e=L("div"),R(n.$$.fragment),this.h()},l(s){e=V(s,"DIV",{class:!0});var o=G(e);y(n.$$.fragment,o),o.forEach($),this.h()},h(){z(e,"class","w-full h-full flex")},m(s,o){d(s,e,o),A(n,e,null),t=!0},p:Ue,i(s){t||(k(n.$$.fragment,s),t=!0)},o(s){S(n.$$.fragment,s),t=!1},d(s){s&&$(e),C(n)}}}function en(l){let e;return{c(){e=U("Previous")},l(n){e=B(n,"Previous")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function Oe(l){let e,n;return e=new _t({props:{$$slots:{default:[ln]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){A(e,t,s),n=!0},p(t,s){const o={};s[0]&48|s[1]&64&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function tn(l){let e;return{c(){e=U("Treat Applications")},l(n){e=B(n,"Treat Applications")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function nn(l){let e,n;return e=new K({props:{$$slots:{default:[tn]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){A(e,t,s),n=!0},p(t,s){const o={};s[1]&64&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Ee(l){let e,n;return e=new bt({props:{$$slots:{default:[on]},$$scope:{ctx:l}}}),e.$on("click",l[34]),{c(){R(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){A(e,t,s),n=!0},p(t,s){const o={};s[1]&64&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function on(l){let e;return{c(){e=U("Treat New Application")},l(n){e=B(n,"Treat New Application")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function sn(l){let e,n,t=l[4]&&Ee(l);return{c(){t&&t.c(),e=re()},l(s){t&&t.l(s),e=re()},m(s,o){t&&t.m(s,o),d(s,e,o),n=!0},p(s,o){s[4]?t?(t.p(s,o),o[0]&16&&k(t,1)):(t=Ee(s),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(se(),S(t,1,1,()=>{t=null}),oe())},i(s){n||(k(t),n=!0)},o(s){S(t),n=!1},d(s){s&&$(e),t&&t.d(s)}}}function ln(l){let e,n,t,s;return e=new gt({props:{$$slots:{default:[nn]},$$scope:{ctx:l}}}),t=new dt({props:{$$slots:{default:[sn]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment),n=O(),R(t.$$.fragment)},l(o){y(e.$$.fragment,o),n=N(o),y(t.$$.fragment,o)},m(o,a){A(e,o,a),d(o,n,a),A(t,o,a),s=!0},p(o,a){const i={};a[1]&64&&(i.$$scope={dirty:a,ctx:o}),e.$set(i);const b={};a[0]&48|a[1]&64&&(b.$$scope={dirty:a,ctx:o}),t.$set(b)},i(o){s||(k(e.$$.fragment,o),k(t.$$.fragment,o),s=!0)},o(o){S(e.$$.fragment,o),S(t.$$.fragment,o),s=!1},d(o){o&&$(n),C(e,o),C(t,o)}}}function Be(l){let e,n;return e=new K({props:{class:l[3]?"block":"hidden",$$slots:{default:[rn]},$$scope:{ctx:l}}}),e.$on("click",l[35]),{c(){R(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){A(e,t,s),n=!0},p(t,s){const o={};s[0]&8&&(o.class=t[3]?"block":"hidden"),s[1]&64&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function rn(l){let e;return{c(){e=U("Update Record")},l(n){e=B(n,"Update Record")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function an(l){let e;return{c(){e=U("Next")},l(n){e=B(n,"Next")},m(n,t){d(n,e,t)},d(n){n&&$(e)}}}function fn(l){let e,n,t,s,o,a,i,b,T,w,g,P;e=new Nt({});function I(r){l[29](r)}let h={onOpenChange:l[16],$$slots:{default:[Mt]},$$scope:{ctx:l}};l[7]!==void 0&&(h.open=l[7]),t=new Se({props:h}),$e.push(()=>me(t,"open",I));function f(r){l[32](r)}let _={$$slots:{default:[Xt]},$$scope:{ctx:l}};l[8]!==void 0&&(_.open=l[8]),a=new Se({props:_}),$e.push(()=>me(a,"open",f));const m=[xt,Zt],c=[];function D(r,u){return r[10]?0:1}return w=D(l),g=c[w]=m[w](l),{c(){R(e.$$.fragment),n=O(),R(t.$$.fragment),o=O(),R(a.$$.fragment),b=O(),T=L("div"),g.c(),this.h()},l(r){y(e.$$.fragment,r),n=N(r),y(t.$$.fragment,r),o=N(r),y(a.$$.fragment,r),b=N(r),T=V(r,"DIV",{class:!0});var u=G(T);g.l(u),u.forEach($),this.h()},h(){z(T,"class","flex flex-col h-screen")},m(r,u){A(e,r,u),d(r,n,u),A(t,r,u),d(r,o,u),A(a,r,u),d(r,b,u),d(r,T,u),c[w].m(T,null),P=!0},p(r,u){const v={};u[0]&10694|u[1]&64&&(v.$$scope={dirty:u,ctx:r}),!s&&u[0]&128&&(s=!0,v.open=r[7],_e(()=>s=!1)),t.$set(v);const q={};u[0]&770|u[1]&64&&(q.$$scope={dirty:u,ctx:r}),!i&&u[0]&256&&(i=!0,q.open=r[8],_e(()=>i=!1)),a.$set(q);let F=w;w=D(r),w===F?c[w].p(r,u):(se(),S(c[F],1,1,()=>{c[F]=null}),oe(),g=c[w],g?g.p(r,u):(g=c[w]=m[w](r),g.c()),k(g,1),g.m(T,null))},i(r){P||(k(e.$$.fragment,r),k(t.$$.fragment,r),k(a.$$.fragment,r),k(g),P=!0)},o(r){S(e.$$.fragment,r),S(t.$$.fragment,r),S(a.$$.fragment,r),S(g),P=!1},d(r){r&&($(n),$(o),$(b),$(T)),C(e,r),C(t,r),C(a,r),c[w].d()}}}function un(l,e,n){let t,s,o,a,i,b,T,w;Q(l,Rt,p=>n(39,s=p)),Q(l,Re,p=>n(40,o=p)),Q(l,ye,p=>n(12,i=p)),Q(l,ne,p=>n(13,b=p)),Q(l,kt,p=>n(42,w=p));let{$$slots:g={},$$scope:P}=e,I=!1,h=!1,f,_,m=!1,c=!1,D=Ce(w.url);Q(l,D,p=>n(41,a=p));let r=null,u=Ce(null);Q(l,u,p=>n(2,T=p));let v=null,q=!1,F=!0,{data:Z}=e;function Y(){n(1,r=null),u.set(null)}function x(){var p;return(p=f==null?void 0:f.applicationHistory)==null?void 0:p.filter(E=>E.applicationType==0||E.applicationType==1).map(E=>E.expiryDate)}async function ge(){n(9,q=!0);const p={beforeStatus:v==null?void 0:v.currentStatus,afterStatus:r,message:T,user:i==null?void 0:i.name,userId:i==null?void 0:i.id.toString(),applicationType:v==null?void 0:v.applicationType,fileId:f==null?void 0:f.id,applicationId:v==null?void 0:v.id,fieldToUpdate:v==null?void 0:v.fieldToChange,newValue:v==null?void 0:v.newValue,fileType:f==null?void 0:f.type,dates:x()},E=await fetch(`${pe}/api/files/UpdateApplicationStatus`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(E.ok){const M=await E.json();console.log(M),ne.set(M),n(9,q=!1),n(7,m=!1),n(8,c=!1),ee.success("Successfully updated status",{position:"top-right"}),u.set(null),n(1,r=null);const j=i.id.toString(),H=i.roles,ce=b.type,te=b.fileStatus;n(3,I=Te(j,b.creatorAccount,H)),n(4,h=De(H,ce,te,f.applicationHistory.map(W=>W.currentStatus)))}}function de(){St.set(f.type),vt.set(1),f.priorityInfo&&(f==null||f.priorityInfo.forEach(p=>{console.log(p.date),p.date.includes("/")?p.date=Ot(p.date,"M/D/YYYY").format("YYYY-MM-DD"):p.date=Pt(p.date)})),Tt.set([]),Dt.set(0),It.set([{name:"",data:[]}]),Ct.set(null),At.set([]),yt.set(null),ne.set(f),ve(`/application?type=${f.type}`)}ft(async()=>{await ue(),x(),console.log(f.applicationHistory.filter(p=>[0,1].includes(p.applicationType)&&![0,1].includes(p.currentStatus)))});async function ue(){n(10,F=!0);const p=a.searchParams.get("id");if(!i){const W=ht(document.cookie);W?ye.set(W):(console.log("the logged in user"),await ve("/auth"))}const E=i.id.toString(),j=await(await fetch(`${pe}/api/files/${p}`)).json(),H=i.roles,ce=j.type,te=j.fileStatus;ne.set(j),n(5,f=j),n(3,I=Te(E,j.creatorAccount,H)),n(4,h=De(H,ce,te,f.applicationHistory.map(W=>W.currentStatus))),n(6,_=te),n(10,F=!1)}async function be(){const p=a.searchParams.get("id");let E=o.indexOf(p);if(E!=0){E-=1;const M=o[E];!M||M===void 0?ee.info("No more files of selected type available",{position:"top-right"}):(D.update(j=>(j.searchParams.set("id",M),j)),await ue())}else ee.info("No more files of selected type available",{position:"top-right"})}async function he(){const p=a.searchParams.get("id");let E=o.indexOf(p);E+=1;const M=o.length;E+2===M&&Fe();const j=o[E];!j||j===void 0?ee.info("No more files of selected type available",{position:"top-right"}):(D.update(H=>(H.searchParams.set("id",j),H)),await ue())}function we(p){if(p.applicationType==1&&[X.AwaitingSearch,X.AwaitingExaminer,X.Re_conduct,X.Rejected,X.KivExaminer,X.KivSearch].includes(f.applicationHistory[0].currentStatus)){ee.error("A Renewal Application  cannot be treated until the new application is treated",{position:"top-right"});return}n(6,_=p.currentStatus),v=p,n(7,m=!0)}async function Fe(){const p=o.length,E=s,M=await fetch(`${pe}/api/files/GetListOfIds?index=${p}`,{method:"POST",headers:{"Content-Type":"application/json"},body:E}),j=await M.json();M.ok&&Re.update(H=>(H=[...H,...j],console.log("updated is",H),H))}function Je(){var E;console.log("fileData",f);const p={query:(E=f==null?void 0:f.titleOfTradeMark)==null?void 0:E.split(" ")[0],classId:f==null?void 0:f.trademarkClass,fileType:f==null?void 0:f.type};sessionStorage.setItem("searchParams",JSON.stringify(p)),window.open("/availabilitysearch","_blank")}const Ge=p=>[ie.BackOffice,ie.Support].includes(p),Ke=p=>n(1,r=p);function ze(p){T=p,u.set(T)}const Qe=()=>{n(7,m=!1),Y()},We=()=>n(8,c=!0);function Xe(p){m=p,n(7,m)}const Ze=()=>{n(8,c=!1)},xe=()=>ge();function et(p){c=p,n(8,c)}const tt=()=>be(),nt=()=>we(f.applicationHistory[0]),ot=()=>de(),st=()=>he();return l.$$set=p=>{"data"in p&&n(22,Z=p.data),"$$scope"in p&&n(37,P=p.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&6&&n(11,t=()=>T!==null&&T!=""&&r!=null)},[de,r,T,I,h,f,_,m,c,q,F,t,i,b,D,u,Y,ge,be,he,we,Je,Z,g,Ge,Ke,ze,Qe,We,Xe,Ze,xe,et,tt,nt,ot,st,P]}class jn extends lt{constructor(e){super(),rt(this,e,un,fn,at,{data:22,updateApplication:0},null,[-1,-1])}get updateApplication(){return this.$$.ctx[0]}}export{jn as component};
