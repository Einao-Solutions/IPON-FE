import{S as De,i as Ne,s as Ue,n as be,d as h,M as Ae,a as Q,b as G,c as i,J as z,aa as Fe,x as a,e as c,f as E,K as B,h as x,g as X,j as f,k,t as Y,A as Me,G as Ee}from"../chunks/Cccy056x.js";import{e as re}from"../chunks/ByixyIeQ.js";import"../chunks/IHki7fMi.js";import{g as ve}from"../chunks/C7QXi3Zc.js";import{b as Pe}from"../chunks/DD-J4JhZ.js";import{f as we}from"../chunks/vkaZbOY3.js";function ye(n,l,r){const t=n.slice();return t[15]=l[r],t[17]=r,t}function xe(n,l,r){const t=n.slice();return t[15]=l[r],t[17]=r,t}function ke(n){let l,r=re(n[1]),t=[];for(let s=0;s<r.length;s+=1)t[s]=Le(xe(n,r,s));return{c(){l=f("ul");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){l=c(s,"UL",{class:!0});var o=E(l);for(let e=0;e<t.length;e+=1)t[e].l(o);o.forEach(h),this.h()},h(){a(l,"class","mt-2 text-xs text-gray-600 list-disc list-inside")},m(s,o){G(s,l,o);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(l,null)},p(s,o){if(o&258){r=re(s[1]);let e;for(e=0;e<r.length;e+=1){const b=xe(s,r,e);t[e]?t[e].p(b,o):(t[e]=Le(b),t[e].c(),t[e].m(l,null))}for(;e<t.length;e+=1)t[e].d(1);t.length=r.length}},d(s){s&&h(l),Ee(t,s)}}}function Le(n){let l,r,t=n[15].name+"",s,o,e,b="Remove",w,u,D;function N(){return n[12](n[17])}return{c(){l=f("li"),r=f("span"),s=Y(t),o=k(),e=f("button"),e.textContent=b,w=k(),this.h()},l(p){l=c(p,"LI",{class:!0});var d=E(l);r=c(d,"SPAN",{});var v=E(r);s=X(v,t),v.forEach(h),o=x(d),e=c(d,"BUTTON",{type:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),B(e)!=="svelte-qowwsh"&&(e.textContent=b),w=x(d),d.forEach(h),this.h()},h(){a(e,"type","button"),a(e,"class","ml-2 text-red-600 hover:text-red-800 text-xs"),a(e,"aria-label","Remove file"),a(l,"class","flex items-center justify-between")},m(p,d){G(p,l,d),i(l,r),i(r,s),i(l,o),i(l,e),i(l,w),u||(D=z(e,"click",N),u=!0)},p(p,d){n=p,d&2&&t!==(t=n[15].name+"")&&Q(s,t)},d(p){p&&h(l),u=!1,D()}}}function Ce(n){let l,r=re(n[2]),t=[];for(let s=0;s<r.length;s+=1)t[s]=Ie(ye(n,r,s));return{c(){l=f("ul");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){l=c(s,"UL",{class:!0});var o=E(l);for(let e=0;e<t.length;e+=1)t[e].l(o);o.forEach(h),this.h()},h(){a(l,"class","mt-2 text-xs text-gray-600 list-disc list-inside")},m(s,o){G(s,l,o);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(l,null)},p(s,o){if(o&516){r=re(s[2]);let e;for(e=0;e<r.length;e+=1){const b=ye(s,r,e);t[e]?t[e].p(b,o):(t[e]=Ie(b),t[e].c(),t[e].m(l,null))}for(;e<t.length;e+=1)t[e].d(1);t.length=r.length}},d(s){s&&h(l),Ee(t,s)}}}function Ie(n){let l,r,t=n[15].name+"",s,o,e,b="Remove",w,u,D;function N(){return n[13](n[17])}return{c(){l=f("li"),r=f("span"),s=Y(t),o=k(),e=f("button"),e.textContent=b,w=k(),this.h()},l(p){l=c(p,"LI",{class:!0});var d=E(l);r=c(d,"SPAN",{});var v=E(r);s=X(v,t),v.forEach(h),o=x(d),e=c(d,"BUTTON",{type:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),B(e)!=="svelte-1ztnju"&&(e.textContent=b),w=x(d),d.forEach(h),this.h()},h(){a(e,"type","button"),a(e,"class","ml-2 text-red-600 hover:text-red-800 text-xs"),a(e,"aria-label","Remove file"),a(l,"class","flex items-center justify-between")},m(p,d){G(p,l,d),i(l,r),i(r,s),i(l,o),i(l,e),i(l,w),u||(D=z(e,"click",N),u=!0)},p(p,d){n=p,d&4&&t!==(t=n[15].name+"")&&Q(s,t)},d(p){p&&h(l),u=!1,D()}}}function Te(n){let l,r;return{c(){l=f("div"),r=Y(n[4]),this.h()},l(t){l=c(t,"DIV",{class:!0});var s=E(l);r=X(s,n[4]),s.forEach(h),this.h()},h(){a(l,"class","mb-2 text-red-600 text-sm text-center")},m(t,s){G(t,l,s),i(l,r)},p(t,s){s&16&&Q(r,t[4])},d(t){t&&h(l)}}}function Se(n){let l,r;return{c(){l=f("div"),r=Y(n[5]),this.h()},l(t){l=c(t,"DIV",{class:!0});var s=E(l);r=X(s,n[5]),s.forEach(h),this.h()},h(){a(l,"class","mb-2 text-green-600 text-sm text-center")},m(t,s){G(t,l,s),i(l,r)},p(t,s){s&32&&Q(r,t[5])},d(t){t&&h(l)}}}function je(n){let l,r,t="File Withdrawal Request Form",s,o,e,b=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
            Back to Search`,w,u,D,N,p='File Number <span class="text-red-500">*</span>',d,v,Z,U,P,g='Withdrawal Letter <span class="text-red-500">*</span>',y,_,j,R,$="Upload your withdrawal letter in PDF format.",ne,ie,A,H,de='Supporting Documents <span class="text-red-500">*</span>',ae,M,oe,W,he="Upload any other supporting documents in PDF or JPEG format.",ue,ce,ee,te,J,V,K=n[3]?"Submitting...":"Submit",le,fe,me,L=n[1].length>0&&ke(n),C=n[2].length>0&&Ce(n),I=n[4]&&Te(n),T=n[5]&&Se(n);return{c(){l=f("div"),r=f("h2"),r.textContent=t,s=k(),o=f("div"),e=f("button"),e.innerHTML=b,w=k(),u=f("form"),D=f("div"),N=f("label"),N.innerHTML=p,d=k(),v=f("input"),Z=k(),U=f("div"),P=f("label"),P.innerHTML=g,y=k(),_=f("input"),j=k(),R=f("div"),R.textContent=$,ne=k(),L&&L.c(),ie=k(),A=f("div"),H=f("label"),H.innerHTML=de,ae=k(),M=f("input"),oe=k(),W=f("div"),W.textContent=he,ue=k(),C&&C.c(),ce=k(),I&&I.c(),ee=k(),T&&T.c(),te=k(),J=f("div"),V=f("button"),le=Y(K),this.h()},l(m){l=c(m,"DIV",{class:!0});var S=E(l);r=c(S,"H2",{class:!0,"data-svelte-h":!0}),B(r)!=="svelte-2hfxex"&&(r.textContent=t),s=x(S),o=c(S,"DIV",{class:!0});var pe=E(o);e=c(pe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(e)!=="svelte-1n3zrpw"&&(e.innerHTML=b),pe.forEach(h),w=x(S),u=c(S,"FORM",{class:!0});var F=E(u);D=c(F,"DIV",{});var se=E(D);N=c(se,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(N)!=="svelte-sjethy"&&(N.innerHTML=p),d=x(se),v=c(se,"INPUT",{id:!0,type:!0,class:!0}),se.forEach(h),Z=x(F),U=c(F,"DIV",{});var O=E(U);P=c(O,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(P)!=="svelte-d97t9w"&&(P.innerHTML=g),y=x(O),_=c(O,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),j=x(O),R=c(O,"DIV",{class:!0,"data-svelte-h":!0}),B(R)!=="svelte-o3cc26"&&(R.textContent=$),ne=x(O),L&&L.l(O),O.forEach(h),ie=x(F),A=c(F,"DIV",{});var q=E(A);H=c(q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),B(H)!=="svelte-2cow55"&&(H.innerHTML=de),ae=x(q),M=c(q,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),oe=x(q),W=c(q,"DIV",{class:!0,"data-svelte-h":!0}),B(W)!=="svelte-t97c70"&&(W.textContent=he),ue=x(q),C&&C.l(q),q.forEach(h),ce=x(F),I&&I.l(F),ee=x(F),T&&T.l(F),te=x(F),J=c(F,"DIV",{class:!0});var ge=E(J);V=c(ge,"BUTTON",{type:!0,class:!0});var _e=E(V);le=X(_e,K),_e.forEach(h),ge.forEach(h),F.forEach(h),S.forEach(h),this.h()},h(){a(r,"class","text-2xl font-bold mb-6 text-center text-gray-800"),a(e,"type","button"),a(e,"class","px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition flex items-center gap-2"),a(o,"class","mb-4 flex justify-start"),a(N,"class","block text-sm font-semibold text-gray-700 mb-1"),a(N,"for","fileNumber"),a(v,"id","fileNumber"),a(v,"type","text"),a(v,"class","w-full border border-gray-300 rounded px-3 py-2 bg-gray-100 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"),v.value=n[0],v.readOnly=!0,v.required=!0,a(P,"class","block text-sm font-semibold text-gray-700 mb-1"),a(P,"for","withdrawalLetter"),a(_,"id","withdrawalLetter"),a(_,"type","file"),a(_,"accept",".pdf"),_.multiple=!0,_.required=!0,a(_,"class","block w-full border border-gray-300 rounded px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500"),a(R,"class","text-xs text-red-600 mt-1"),a(H,"class","block text-sm font-semibold text-gray-700 mb-1"),a(H,"for","supportingDocs"),a(M,"id","supportingDocs"),a(M,"type","file"),a(M,"accept",".pdf,.jpeg,.jpg"),M.multiple=!0,M.required=!0,a(M,"class","block w-full border border-gray-300 rounded px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500"),a(W,"class","text-xs text-red-600 mt-1"),a(V,"type","submit"),a(V,"class","px-6 py-2 bg-red-600 text-white rounded-lg font-semibold text-base hover:bg-red-700 transition"),V.disabled=n[3],a(J,"class","flex"),a(u,"class","space-y-6"),a(l,"class","max-w-lg mx-auto mt-12 bg-white p-8 rounded-xl shadow-lg border border-gray-100")},m(m,S){G(m,l,S),i(l,r),i(l,s),i(l,o),i(o,e),i(l,w),i(l,u),i(u,D),i(D,N),i(D,d),i(D,v),i(u,Z),i(u,U),i(U,P),i(U,y),i(U,_),i(U,j),i(U,R),i(U,ne),L&&L.m(U,null),i(u,ie),i(u,A),i(A,H),i(A,ae),i(A,M),i(A,oe),i(A,W),i(A,ue),C&&C.m(A,null),i(u,ce),I&&I.m(u,null),i(u,ee),T&&T.m(u,null),i(u,te),i(u,J),i(J,V),i(V,le),fe||(me=[z(e,"click",n[11]),z(_,"change",n[6]),z(M,"change",n[7]),z(u,"submit",Fe(n[10]))],fe=!0)},p(m,[S]){S&1&&v.value!==m[0]&&(v.value=m[0]),m[1].length>0?L?L.p(m,S):(L=ke(m),L.c(),L.m(U,null)):L&&(L.d(1),L=null),m[2].length>0?C?C.p(m,S):(C=Ce(m),C.c(),C.m(A,null)):C&&(C.d(1),C=null),m[4]?I?I.p(m,S):(I=Te(m),I.c(),I.m(u,ee)):I&&(I.d(1),I=null),m[5]?T?T.p(m,S):(T=Se(m),T.c(),T.m(u,te)):T&&(T.d(1),T=null),S&8&&K!==(K=m[3]?"Submitting...":"Submit")&&Q(le,K),S&8&&(V.disabled=m[3])},i:be,o:be,d(m){m&&h(l),L&&L.d(),C&&C.d(),I&&I.d(),T&&T.d(),fe=!1,Ae(me)}}}function Re(n,l,r){let t="",s="",o=[],e=[],b=!1,w=null,u=null;Me(()=>{const g=new URL(window.location.href);r(0,t=g.searchParams.get("fileNumber")??""),s=g.searchParams.get("fileType")??""});function D(g){const y=g.target.files;y&&r(1,o=[...o,...Array.from(y)])}function N(g){const y=g.target.files;y&&r(2,e=[...e,...Array.from(y)])}function p(g){r(1,o=o.filter((y,_)=>_!==g))}function d(g){r(2,e=e.filter((y,_)=>_!==g))}async function v(){if(r(4,w=null),r(5,u=null),!t||!s||o.length===0||e.length===0){r(4,w="All fields are required. Please upload both the withdrawal letter and supporting documents.");return}r(3,b=!0);try{const g=await fetch(`${Pe}/api/files/GetFileWithdrawalCost?fileId=${encodeURIComponent(t)}&fileType=${s}`,{method:"GET"});if(!g.ok){r(4,w="Failed to get payment details."),r(3,b=!1);return}const y=await g.json(),_=y==null?void 0:y.amount,j=y==null?void 0:y.rrr;if(console.log("cost is",_),console.log("paymentId is",j),_&&j){console.log("cost is",_),console.log("paymentId is",j);const R=await we("withdrawal_letter",o),$=await we("supporting_documents",e);sessionStorage.setItem("withdrawal_fileNumber",t),sessionStorage.setItem("withdrawal_fileType",s),sessionStorage.setItem("withdrawal_cost",_),sessionStorage.setItem("withdrawal_rrr",j),sessionStorage.setItem("withdrawal_withdrawalLetter",JSON.stringify(R)),sessionStorage.setItem("withdrawal_supportingDocs",JSON.stringify($)),await ve(`/payment?type=filewithdrawal&rrr=${j}&amount=${_}&fileNumber=${encodeURIComponent(t)}`)}else r(4,w="Could not retrieve payment details.")}catch{r(4,w="An error occurred while submitting.")}finally{r(3,b=!1)}}return[t,o,e,b,w,u,D,N,p,d,v,()=>ve("/home/file-withdrawal/search/"),g=>p(g),g=>d(g)]}class Ge extends De{constructor(l){super(),Ne(this,l,Re,je,Ue,{})}}export{Ge as component};
