import{s as ke,n as me,d as p,C as Te,F as he,a as $,i as J,b as i,z as G,$ as Ce,o as a,c as u,e as E,A as R,g as T,f as ee,h as c,j as C,t as te,p as Ee,w as Ie}from"../chunks/qLIpCCSV.js";import{e as be}from"../chunks/Dvl1x7Q7.js";import{S as Se,i as De}from"../chunks/Bpqo0lwe.js";import{g as ge}from"../chunks/sTQiEMwh.js";import{b as Le}from"../chunks/DvhB1z8p.js";import{f as Pe}from"../chunks/CwF-pnTc.js";function _e(n,t,l){const e=n.slice();return e[13]=t[l],e[15]=l,e}function ve(n){let t,l=be(n[2]),e=[];for(let s=0;s<l.length;s+=1)e[s]=ye(_e(n,l,s));return{c(){t=c("ul");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=u(s,"UL",{class:!0});var o=E(t);for(let r=0;r<e.length;r+=1)e[r].l(o);o.forEach(p),this.h()},h(){a(t,"class","mt-2 text-xs text-gray-600 list-disc list-inside")},m(s,o){J(s,t,o);for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(t,null)},p(s,o){if(o&132){l=be(s[2]);let r;for(r=0;r<l.length;r+=1){const y=_e(s,l,r);e[r]?e[r].p(y,o):(e[r]=ye(y),e[r].c(),e[r].m(t,null))}for(;r<e.length;r+=1)e[r].d(1);e.length=l.length}},d(s){s&&p(t),Ie(e,s)}}}function ye(n){let t,l,e=n[13].name+"",s,o,r,y="Remove",P,f,I;function S(){return n[11](n[15])}return{c(){t=c("li"),l=c("span"),s=te(e),o=C(),r=c("button"),r.textContent=y,P=C(),this.h()},l(m){t=u(m,"LI",{class:!0});var w=E(t);l=u(w,"SPAN",{});var V=E(l);s=ee(V,e),V.forEach(p),o=T(w),r=u(w,"BUTTON",{type:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),R(r)!=="svelte-kh9cgq"&&(r.textContent=y),P=T(w),w.forEach(p),this.h()},h(){a(r,"type","button"),a(r,"class","ml-2 text-red-600 hover:text-red-800 text-xs"),a(r,"aria-label","Remove file"),a(t,"class","flex items-center justify-between")},m(m,w){J(m,t,w),i(t,l),i(l,s),i(t,o),i(t,r),i(t,P),f||(I=G(r,"click",S),f=!0)},p(m,w){n=m,w&4&&e!==(e=n[13].name+"")&&$(s,e)},d(m){m&&p(t),f=!1,I()}}}function xe(n){let t,l;return{c(){t=c("div"),l=te(n[4]),this.h()},l(e){t=u(e,"DIV",{class:!0});var s=E(t);l=ee(s,n[4]),s.forEach(p),this.h()},h(){a(t,"class","mb-2 text-red-600 text-sm text-center")},m(e,s){J(e,t,s),i(t,l)},p(e,s){s&16&&$(l,e[4])},d(e){e&&p(t)}}}function we(n){let t,l;return{c(){t=c("div"),l=te(n[5]),this.h()},l(e){t=u(e,"DIV",{class:!0});var s=E(t);l=ee(s,n[5]),s.forEach(p),this.h()},h(){a(t,"class","mb-2 text-green-600 text-sm text-center")},m(e,s){J(e,t,s),i(t,l)},p(e,s){s&32&&$(l,e[5])},d(e){e&&p(t)}}}function Ne(n){let t,l,e="Publication Status Update Request Form",s,o,r,y=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
            Back to Search`,P,f,I,S,m,w='File Number <span class="text-red-500">*</span>',V,D,x,h,k,j='Publication Date <span class="text-red-500">*</span>',O,N,le,L,A,oe='Proof of Publication <span class="text-red-500">*</span>',se,U,re,B,ue="Upload one or more proofs of publication in PDF or JPEG format.",ne,ie,K,Q,q,F,z=n[3]?"Submitting...":"Submit",W,ae,ce,b=n[2].length>0&&ve(n),g=n[4]&&xe(n),_=n[5]&&we(n);return{c(){t=c("div"),l=c("h2"),l.textContent=e,s=C(),o=c("div"),r=c("button"),r.innerHTML=y,P=C(),f=c("form"),I=c("div"),S=c("div"),m=c("label"),m.innerHTML=w,V=C(),D=c("input"),x=C(),h=c("div"),k=c("label"),k.innerHTML=j,O=C(),N=c("input"),le=C(),L=c("div"),A=c("label"),A.innerHTML=oe,se=C(),U=c("input"),re=C(),B=c("div"),B.textContent=ue,ne=C(),b&&b.c(),ie=C(),g&&g.c(),K=C(),_&&_.c(),Q=C(),q=c("div"),F=c("button"),W=te(z),this.h()},l(d){t=u(d,"DIV",{class:!0});var v=E(t);l=u(v,"H2",{class:!0,"data-svelte-h":!0}),R(l)!=="svelte-1w7x259"&&(l.textContent=e),s=T(v),o=u(v,"DIV",{class:!0});var fe=E(o);r=u(fe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),R(r)!=="svelte-wrbtuz"&&(r.innerHTML=y),fe.forEach(p),P=T(v),f=u(v,"FORM",{class:!0});var M=E(f);I=u(M,"DIV",{class:!0});var X=E(I);S=u(X,"DIV",{});var Y=E(S);m=u(Y,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(m)!=="svelte-ab4aty"&&(m.innerHTML=w),V=T(Y),D=u(Y,"INPUT",{id:!0,type:!0,class:!0}),Y.forEach(p),x=T(X),h=u(X,"DIV",{});var Z=E(h);k=u(Z,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(k)!=="svelte-1tn9ytu"&&(k.innerHTML=j),O=T(Z),N=u(Z,"INPUT",{id:!0,type:!0,class:!0}),Z.forEach(p),X.forEach(p),le=T(M),L=u(M,"DIV",{});var H=E(L);A=u(H,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(A)!=="svelte-d2ypzf"&&(A.innerHTML=oe),se=T(H),U=u(H,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),re=T(H),B=u(H,"DIV",{class:!0,"data-svelte-h":!0}),R(B)!=="svelte-1k6tgyx"&&(B.textContent=ue),ne=T(H),b&&b.l(H),H.forEach(p),ie=T(M),g&&g.l(M),K=T(M),_&&_.l(M),Q=T(M),q=u(M,"DIV",{class:!0});var de=E(q);F=u(de,"BUTTON",{type:!0,class:!0});var pe=E(F);W=ee(pe,z),pe.forEach(p),de.forEach(p),M.forEach(p),v.forEach(p),this.h()},h(){a(l,"class","text-2xl font-bold mb-6 text-center text-gray-800"),a(r,"type","button"),a(r,"class","px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition flex items-center gap-2"),a(o,"class","mb-4 flex justify-start"),a(m,"class","block text-sm font-semibold text-gray-700 mb-1"),a(m,"for","fileNumber"),a(D,"id","fileNumber"),a(D,"type","text"),a(D,"class","w-full border border-gray-300 rounded px-3 py-2 bg-gray-100 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"),D.value=n[0],D.readOnly=!0,D.required=!0,a(k,"class","block text-sm font-semibold text-gray-700 mb-1"),a(k,"for","publicationDate"),a(N,"id","publicationDate"),a(N,"type","date"),a(N,"class","w-full border border-gray-300 rounded px-3 py-2 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"),N.required=!0,a(I,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),a(A,"class","block text-sm font-semibold text-gray-700 mb-1"),a(A,"for","proof"),a(U,"id","proof"),a(U,"type","file"),a(U,"accept",".pdf,.jpeg,.jpg"),U.multiple=!0,U.required=!0,a(U,"class","block w-full border border-gray-300 rounded px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500"),a(B,"class","text-xs text-red-600 mt-1"),a(F,"type","submit"),a(F,"class","px-6 py-2 bg-green-600 text-white rounded-lg font-semibold text-base hover:bg-green-700 transition"),F.disabled=n[3],a(q,"class","flex"),a(f,"class","space-y-6"),a(t,"class","max-w-lg mx-auto mt-12 bg-white p-8 rounded-xl shadow-lg border border-gray-100")},m(d,v){J(d,t,v),i(t,l),i(t,s),i(t,o),i(o,r),i(t,P),i(t,f),i(f,I),i(I,S),i(S,m),i(S,V),i(S,D),i(I,x),i(I,h),i(h,k),i(h,O),i(h,N),he(N,n[1]),i(f,le),i(f,L),i(L,A),i(L,se),i(L,U),i(L,re),i(L,B),i(L,ne),b&&b.m(L,null),i(f,ie),g&&g.m(f,null),i(f,K),_&&_.m(f,null),i(f,Q),i(f,q),i(q,F),i(F,W),ae||(ce=[G(r,"click",n[9]),G(N,"input",n[10]),G(U,"change",n[6]),G(f,"submit",Ce(n[8]))],ae=!0)},p(d,[v]){v&1&&D.value!==d[0]&&(D.value=d[0]),v&2&&he(N,d[1]),d[2].length>0?b?b.p(d,v):(b=ve(d),b.c(),b.m(L,null)):b&&(b.d(1),b=null),d[4]?g?g.p(d,v):(g=xe(d),g.c(),g.m(f,K)):g&&(g.d(1),g=null),d[5]?_?_.p(d,v):(_=we(d),_.c(),_.m(f,Q)):_&&(_.d(1),_=null),v&8&&z!==(z=d[3]?"Submitting...":"Submit")&&$(W,z),v&8&&(F.disabled=d[3])},i:me,o:me,d(d){d&&p(t),b&&b.d(),g&&g.d(),_&&_.d(),ae=!1,Te(ce)}}}function Ue(n){return/TM/i.test(n)?2:/PT/i.test(n)?0:/DS/i.test(n)||/DES/i.test(n)?1:2}function Me(n,t,l){let e="",s="",o=[],r=!1,y=null,P=null;Ee(()=>{const x=new URL(window.location.href);l(0,e=x.searchParams.get("fileNumber")??"")});const f=Ue(e);function I(x){const h=x.target.files;h&&l(2,o=[...o,...Array.from(h)])}function S(x){l(2,o=o.filter((h,k)=>k!==x))}async function m(){if(l(4,y=null),l(5,P=null),!e||!s||o.length===0){l(4,y="All fields are required. Please fill in all fields and upload your proof of publication.");return}l(3,r=!0);try{const x=await fetch(`${Le}/api/files/GetPublicationStatusUpdateCost?fileId=${encodeURIComponent(e)}&fileType=${f}`,{method:"GET"});if(!x.ok){l(4,y="Failed to get payment details."),l(3,r=!1);return}const h=await x.json(),k=h==null?void 0:h.amount,j=h==null?void 0:h.rrr;if(k&&j){const O=await Pe("publication",o);sessionStorage.setItem("publicationstatusupdate_fileNumber",e),sessionStorage.setItem("publicationstatusupdate_publicationDate",s),sessionStorage.setItem("publicationstatusupdate_cost",k),sessionStorage.setItem("publicationstatusupdate_rrr",j),sessionStorage.setItem("publicationstatusupdate_attachments",JSON.stringify(O)),await ge(`/payment?type=publicationstatusupdate&rrr=${j}&amount=${k}&fileNumber=${encodeURIComponent(e)}`)}else l(4,y="Could not retrieve payment details.")}catch{l(4,y="An error occurred while submitting.")}finally{l(3,r=!1)}}const w=()=>ge("/home/publications/publicationstatusupdate/search/");function V(){s=this.value,l(1,s)}return[e,s,o,r,y,P,I,S,m,w,V,x=>S(x)]}class je extends Se{constructor(t){super(),De(this,t,Me,Ne,ke,{})}}export{je as component};
