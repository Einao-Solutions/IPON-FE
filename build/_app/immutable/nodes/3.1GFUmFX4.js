import{S as lt,i as rt,s as at,m as $e,o as me,d as p,p as R,q as S,r as k,u as _e,v as se,w as C,b as d,x as W,y as A,h as P,e as M,f as K,z as y,k as I,j as F,l as X,A as ft,n as je,B as it,C as ut,D as ct,E as pt,F as oe,c as G,G as $t,a as Ye,H as le,g as B,t as j,I as re,J as mt}from"../chunks/Cccy056x.js";import{e as ke}from"../chunks/ByixyIeQ.js";import"../chunks/IHki7fMi.js";import"../chunks/Mi5ChQ-_.js";import{R as Se,D as qe}from"../chunks/Tp6w8__K.js";import{R as _t,T as gt,D as dt,a as bt}from"../chunks/D218O3b-.js";import{g as ve}from"../chunks/C7QXi3Zc.js";import{p as ht,C as Te,a as Re,g as Ce,m as ae,b as fe}from"../chunks/Clnb24Qm.js";import{T as wt}from"../chunks/CXG556D5.js";import{w as Ae}from"../chunks/Bx4tD3iK.js";import{b as pe,U as ie,F as ye,A as x}from"../chunks/DD-J4JhZ.js";import{p as kt}from"../chunks/ChIxZ6xF.js";import{l as De,a as ne,n as St,b as vt,f as Tt,c as Rt,d as Ct,s as At,v as yt,e as Dt,g as Ne,q as Nt}from"../chunks/CuoJv0KR.js";import{$ as Pt}from"../chunks/BqrBv-4G.js";import{I as He}from"../chunks/DQ1KgJGZ.js";import{S as It}from"../chunks/DqPXHA5v.js";import{t as ee}from"../chunks/rg3ioSbs.js";import{d as Et}from"../chunks/wXhWW5a2.js";import"../chunks/BbVspNW5.js";import"../chunks/R6lDc60d.js";import"../chunks/D4QbBJvT.js";import"../chunks/xJp9Kd2E.js";import{B as z}from"../chunks/BCzZLC02.js";import{D as Ve,a as Le}from"../chunks/Djc1-W0q.js";import{D as Me}from"../chunks/BMHTdNsM.js";import{D as Fe}from"../chunks/DtBQLE6u.js";function Pe(r,e,n){const t=r.slice();return t[46]=e[n],t}function Ot(r){let e;return{c(){e=j("Treat Application")},l(n){e=B(n,"Treat Application")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function Bt(r){let e;return{c(){e=j("Select new status")},l(n){e=B(n,"Select new status")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function jt(r){let e,n,t,l;return e=new Le({props:{$$slots:{default:[Ot]},$$scope:{ctx:r}}}),t=new Fe({props:{$$slots:{default:[Bt]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment),n=I(),y(t.$$.fragment)},l(s){A(e.$$.fragment,s),n=P(s),A(t.$$.fragment,s)},m(s,a){C(e,s,a),d(s,n,a),C(t,s,a),l=!0},p(s,a){const i={};a[1]&64&&(i.$$scope={dirty:a,ctx:s}),e.$set(i);const _={};a[1]&64&&(_.$$scope={dirty:a,ctx:s}),t.$set(_)},i(s){l||(k(e.$$.fragment,s),k(t.$$.fragment,s),l=!0)},o(s){S(e.$$.fragment,s),S(t.$$.fragment,s),l=!1},d(s){s&&p(n),R(e,s),R(t,s)}}}function Yt(r){let e;return{c(){e=j("Availability Search")},l(n){e=B(n,"Availability Search")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function qt(r){let e;function n(s,a){return Yt}let l=n()(r);return{c(){l.c(),e=re()},l(s){l.l(s),e=re()},m(s,a){l.m(s,a),d(s,e,a)},p:je,d(s){s&&p(e),l.d(s)}}}function Ie(r){let e,n,t=ae(r[46])+"",l,s,a,i,_;function v(){return r[25](r[46])}return{c(){e=F("button"),n=F("p"),l=j(t),s=I(),this.h()},l(w){e=M(w,"BUTTON",{style:!0,class:!0});var g=K(e);n=M(g,"P",{});var N=K(n);l=B(N,t),N.forEach(p),s=P(g),g.forEach(p),this.h()},h(){le(e,"background-color",r[1]===r[46]?fe(r[46]):"transparent"),W(e,"class",a="border rounded-md flex p-2 flex-grow items-center hover:bg-accent hover:cursor-pointer "+(r[1]===r[46]?"":"bg-none"))},m(w,g){d(w,e,g),G(e,n),G(n,l),G(e,s),i||(_=mt(e,"click",v),i=!0)},p(w,g){r=w,g[0]&8256&&t!==(t=ae(r[46])+"")&&Ye(l,t),g[0]&8258&&le(e,"background-color",r[1]===r[46]?fe(r[46]):"transparent"),g[0]&8258&&a!==(a="border rounded-md flex p-2 flex-grow items-center hover:bg-accent hover:cursor-pointer "+(r[1]===r[46]?"":"bg-none"))&&W(e,"class",a)},d(w){w&&p(e),i=!1,_()}}}function Ht(r){let e;return{c(){e=j("Cancel")},l(n){e=B(n,"Cancel")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function Vt(r){let e;return{c(){e=j("Continue")},l(n){e=B(n,"Continue")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function Lt(r){let e,n,t,l;return e=new z({props:{variant:"outline",$$slots:{default:[Ht]},$$scope:{ctx:r}}}),e.$on("click",r[27]),t=new z({props:{disabled:!r[11](),$$slots:{default:[Vt]},$$scope:{ctx:r}}}),t.$on("click",r[28]),{c(){y(e.$$.fragment),n=I(),y(t.$$.fragment)},l(s){A(e.$$.fragment,s),n=P(s),A(t.$$.fragment,s)},m(s,a){C(e,s,a),d(s,n,a),C(t,s,a),l=!0},p(s,a){const i={};a[1]&64&&(i.$$scope={dirty:a,ctx:s}),e.$set(i);const _={};a[0]&2048&&(_.disabled=!s[11]()),a[1]&64&&(_.$$scope={dirty:a,ctx:s}),t.$set(_)},i(s){l||(k(e.$$.fragment,s),k(t.$$.fragment,s),l=!0)},o(s){S(e.$$.fragment,s),S(t.$$.fragment,s),l=!1},d(s){s&&p(n),R(e,s),R(t,s)}}}function Mt(r){let e,n,t,l,s,a,i,_,v,w,g,N,T,b,u;e=new Ve({props:{$$slots:{default:[jt]},$$scope:{ctx:r}}}),s=new z({props:{$$slots:{default:[qt]},$$scope:{ctx:r}}}),s.$on("click",r[21]);let m=ke(Ce(r[6],r[13].type)),$=[];for(let o=0;o<m.length;o+=1)$[o]=Ie(Pe(r,m,o));function D(o){r[26](o)}let Y={class:"min-h-[120px]",placeholder:"Enter reason"};return r[2]!==void 0&&(Y.value=r[2]),g=new wt({props:Y}),$e.push(()=>me(g,"value",D)),b=new Me({props:{class:"sm:flex gap-3",$$slots:{default:[Lt]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment),n=I(),t=F("br"),l=I(),y(s.$$.fragment),a=I(),i=F("div");for(let o=0;o<$.length;o+=1)$[o].c();_=I(),v=F("br"),w=I(),y(g.$$.fragment),T=I(),y(b.$$.fragment),this.h()},l(o){A(e.$$.fragment,o),n=P(o),t=M(o,"BR",{}),l=P(o),A(s.$$.fragment,o),a=P(o),i=M(o,"DIV",{class:!0});var f=K(i);for(let h=0;h<$.length;h+=1)$[h].l(f);f.forEach(p),_=P(o),v=M(o,"BR",{}),w=P(o),A(g.$$.fragment,o),T=P(o),A(b.$$.fragment,o),this.h()},h(){W(i,"class","gap-2 flex")},m(o,f){C(e,o,f),d(o,n,f),d(o,t,f),d(o,l,f),C(s,o,f),d(o,a,f),d(o,i,f);for(let h=0;h<$.length;h+=1)$[h]&&$[h].m(i,null);d(o,_,f),d(o,v,f),d(o,w,f),C(g,o,f),d(o,T,f),C(b,o,f),u=!0},p(o,f){const h={};f[1]&64&&(h.$$scope={dirty:f,ctx:o}),e.$set(h);const H={};if(f[1]&64&&(H.$$scope={dirty:f,ctx:o}),s.$set(H),f[0]&8258){m=ke(Ce(o[6],o[13].type));let O;for(O=0;O<m.length;O+=1){const Q=Pe(o,m,O);$[O]?$[O].p(Q,f):($[O]=Ie(Q),$[O].c(),$[O].m(i,null))}for(;O<$.length;O+=1)$[O].d(1);$.length=m.length}const V={};!N&&f[0]&4&&(N=!0,V.value=o[2],_e(()=>N=!1)),g.$set(V);const U={};f[0]&2432|f[1]&64&&(U.$$scope={dirty:f,ctx:o}),b.$set(U)},i(o){u||(k(e.$$.fragment,o),k(s.$$.fragment,o),k(g.$$.fragment,o),k(b.$$.fragment,o),u=!0)},o(o){S(e.$$.fragment,o),S(s.$$.fragment,o),S(g.$$.fragment,o),S(b.$$.fragment,o),u=!1},d(o){o&&(p(n),p(t),p(l),p(a),p(i),p(_),p(v),p(w),p(T)),R(e,o),R(s,o),$t($,o),R(g,o),R(b,o)}}}function Ft(r){let e,n;return e=new qe({props:{class:"max-w-fit",$$slots:{default:[Mt]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,l){C(e,t,l),n=!0},p(t,l){const s={};l[0]&10694|l[1]&64&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Jt(r){let e;return{c(){e=j("Confirmation")},l(n){e=B(n,"Confirmation")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function Gt(r){let e;return{c(){e=j("Select new status")},l(n){e=B(n,"Select new status")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function Kt(r){let e,n,t,l;return e=new Le({props:{$$slots:{default:[Jt]},$$scope:{ctx:r}}}),t=new Fe({props:{$$slots:{default:[Gt]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment),n=I(),y(t.$$.fragment)},l(s){A(e.$$.fragment,s),n=P(s),A(t.$$.fragment,s)},m(s,a){C(e,s,a),d(s,n,a),C(t,s,a),l=!0},p(s,a){const i={};a[1]&64&&(i.$$scope={dirty:a,ctx:s}),e.$set(i);const _={};a[1]&64&&(_.$$scope={dirty:a,ctx:s}),t.$set(_)},i(s){l||(k(e.$$.fragment,s),k(t.$$.fragment,s),l=!0)},o(s){S(e.$$.fragment,s),S(t.$$.fragment,s),l=!1},d(s){s&&p(n),R(e,s),R(t,s)}}}function zt(r){let e;return{c(){e=j("Cancel")},l(n){e=B(n,"Cancel")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function Ut(r){let e,n,t;return e=new He({props:{class:r[9]?"":"hidden",icon:"line-md:loading-twotone-loop",width:"1.2rem",height:"1.2rem"}}),{c(){y(e.$$.fragment),n=j(`\r
\r
				Continue`)},l(l){A(e.$$.fragment,l),n=B(l,`\r
\r
				Continue`)},m(l,s){C(e,l,s),d(l,n,s),t=!0},p(l,s){const a={};s[0]&512&&(a.class=l[9]?"":"hidden"),e.$set(a)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){l&&p(n),R(e,l)}}}function Qt(r){let e,n,t,l;return e=new z({props:{variant:"outline",$$slots:{default:[zt]},$$scope:{ctx:r}}}),e.$on("click",r[30]),t=new z({props:{disabled:r[9],$$slots:{default:[Ut]},$$scope:{ctx:r}}}),t.$on("click",r[31]),{c(){y(e.$$.fragment),n=I(),y(t.$$.fragment)},l(s){A(e.$$.fragment,s),n=P(s),A(t.$$.fragment,s)},m(s,a){C(e,s,a),d(s,n,a),C(t,s,a),l=!0},p(s,a){const i={};a[1]&64&&(i.$$scope={dirty:a,ctx:s}),e.$set(i);const _={};a[0]&512&&(_.disabled=s[9]),a[0]&512|a[1]&64&&(_.$$scope={dirty:a,ctx:s}),t.$set(_)},i(s){l||(k(e.$$.fragment,s),k(t.$$.fragment,s),l=!0)},o(s){S(e.$$.fragment,s),S(t.$$.fragment,s),l=!1},d(s){s&&p(n),R(e,s),R(t,s)}}}function Wt(r){let e,n,t,l,s,a,i,_=ae(r[1])+"",v,w,g,N,T,b,u;return e=new Ve({props:{$$slots:{default:[Kt]},$$scope:{ctx:r}}}),b=new Me({props:{class:"sm:flex gap-3",$$slots:{default:[Qt]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment),n=I(),t=F("br"),l=I(),s=F("p"),a=j(`Are you sure you want to update the status to\r
			`),i=F("span"),v=j(_),w=j(" ?"),g=I(),N=F("br"),T=I(),y(b.$$.fragment),this.h()},l(m){A(e.$$.fragment,m),n=P(m),t=M(m,"BR",{}),l=P(m),s=M(m,"P",{});var $=K(s);a=B($,`Are you sure you want to update the status to\r
			`),i=M($,"SPAN",{class:!0,style:!0});var D=K(i);v=B(D,_),D.forEach(p),w=B($," ?"),$.forEach(p),g=P(m),N=M(m,"BR",{}),T=P(m),A(b.$$.fragment,m),this.h()},h(){W(i,"class","border w-fit p-1 rounded-md"),le(i,"background-color",fe(r[1]))},m(m,$){C(e,m,$),d(m,n,$),d(m,t,$),d(m,l,$),d(m,s,$),G(s,a),G(s,i),G(i,v),G(s,w),d(m,g,$),d(m,N,$),d(m,T,$),C(b,m,$),u=!0},p(m,$){const D={};$[1]&64&&(D.$$scope={dirty:$,ctx:m}),e.$set(D),(!u||$[0]&2)&&_!==(_=ae(m[1])+"")&&Ye(v,_),(!u||$[0]&2)&&le(i,"background-color",fe(m[1]));const Y={};$[0]&768|$[1]&64&&(Y.$$scope={dirty:$,ctx:m}),b.$set(Y)},i(m){u||(k(e.$$.fragment,m),k(b.$$.fragment,m),u=!0)},o(m){S(e.$$.fragment,m),S(b.$$.fragment,m),u=!1},d(m){m&&(p(n),p(t),p(l),p(s),p(g),p(N),p(T)),R(e,m),R(b,m)}}}function Xt(r){let e,n;return e=new qe({props:{class:"min-w-fit mx-1.5",$$slots:{default:[Wt]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,l){C(e,t,l),n=!0},p(t,l){const s={};l[0]&770|l[1]&64&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Zt(r){var m,$,D,Y;let e,n,t,l,s,a=($=(m=r[12])==null?void 0:m.userRoles)==null?void 0:$.some(r[24]),i,_=((Y=(D=r[12])==null?void 0:D.userRoles)==null?void 0:Y.includes(ie.Tech))&&r[5].type===ye.Design,v,w,g;const N=r[23].default,T=it(N,r,r[37],null);l=new z({props:{$$slots:{default:[en]},$$scope:{ctx:r}}}),l.$on("click",r[33]);let b=a&&Ee(r),u=_&&Be(r);return w=new z({props:{$$slots:{default:[an]},$$scope:{ctx:r}}}),w.$on("click",r[36]),{c(){e=F("div"),T&&T.c(),n=I(),t=F("div"),y(l.$$.fragment),s=I(),b&&b.c(),i=I(),u&&u.c(),v=I(),y(w.$$.fragment),this.h()},l(o){e=M(o,"DIV",{class:!0});var f=K(e);T&&T.l(f),f.forEach(p),n=P(o),t=M(o,"DIV",{class:!0});var h=K(t);A(l.$$.fragment,h),s=P(h),b&&b.l(h),i=P(h),u&&u.l(h),v=P(h),A(w.$$.fragment,h),h.forEach(p),this.h()},h(){W(e,"class","basis-11/12 overflow-y-auto"),W(t,"class","flex justify-between p-4 basis-1/12")},m(o,f){d(o,e,f),T&&T.m(e,null),d(o,n,f),d(o,t,f),C(l,t,null),G(t,s),b&&b.m(t,null),G(t,i),u&&u.m(t,null),G(t,v),C(w,t,null),g=!0},p(o,f){var V,U,O,Q;T&&T.p&&(!g||f[1]&64)&&ut(T,N,o,o[37],g?pt(N,o[37],f,null):ct(o[37]),null);const h={};f[1]&64&&(h.$$scope={dirty:f,ctx:o}),l.$set(h),f[0]&4096&&(a=(U=(V=o[12])==null?void 0:V.userRoles)==null?void 0:U.some(o[24])),a?b?(b.p(o,f),f[0]&4096&&k(b,1)):(b=Ee(o),b.c(),k(b,1),b.m(t,i)):b&&(oe(),S(b,1,1,()=>{b=null}),se()),f[0]&4128&&(_=((Q=(O=o[12])==null?void 0:O.userRoles)==null?void 0:Q.includes(ie.Tech))&&o[5].type===ye.Design),_?u?(u.p(o,f),f[0]&4128&&k(u,1)):(u=Be(o),u.c(),k(u,1),u.m(t,v)):u&&(oe(),S(u,1,1,()=>{u=null}),se());const H={};f[1]&64&&(H.$$scope={dirty:f,ctx:o}),w.$set(H)},i(o){g||(k(T,o),k(l.$$.fragment,o),k(b),k(u),k(w.$$.fragment,o),g=!0)},o(o){S(T,o),S(l.$$.fragment,o),S(b),S(u),S(w.$$.fragment,o),g=!1},d(o){o&&(p(e),p(n),p(t)),T&&T.d(o),R(l),b&&b.d(),u&&u.d(),R(w)}}}function xt(r){let e,n,t;return n=new He({props:{class:"mx-auto my-auto",icon:"line-md:loading-twotone-loop",width:"1.2rem",height:"1.2rem"}}),{c(){e=F("div"),y(n.$$.fragment),this.h()},l(l){e=M(l,"DIV",{class:!0});var s=K(e);A(n.$$.fragment,s),s.forEach(p),this.h()},h(){W(e,"class","w-full h-full flex")},m(l,s){d(l,e,s),C(n,e,null),t=!0},p:je,i(l){t||(k(n.$$.fragment,l),t=!0)},o(l){S(n.$$.fragment,l),t=!1},d(l){l&&p(e),R(n)}}}function en(r){let e;return{c(){e=j("Previous")},l(n){e=B(n,"Previous")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function Ee(r){let e,n;return e=new _t({props:{$$slots:{default:[ln]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,l){C(e,t,l),n=!0},p(t,l){const s={};l[0]&48|l[1]&64&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function tn(r){let e;return{c(){e=j("Treat Applications")},l(n){e=B(n,"Treat Applications")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function nn(r){let e,n;return e=new z({props:{$$slots:{default:[tn]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,l){C(e,t,l),n=!0},p(t,l){const s={};l[1]&64&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Oe(r){let e,n;return e=new bt({props:{$$slots:{default:[sn]},$$scope:{ctx:r}}}),e.$on("click",r[34]),{c(){y(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,l){C(e,t,l),n=!0},p(t,l){const s={};l[1]&64&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function sn(r){let e;return{c(){e=j("Treat New Application")},l(n){e=B(n,"Treat New Application")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function on(r){let e,n,t=r[4]&&Oe(r);return{c(){t&&t.c(),e=re()},l(l){t&&t.l(l),e=re()},m(l,s){t&&t.m(l,s),d(l,e,s),n=!0},p(l,s){l[4]?t?(t.p(l,s),s[0]&16&&k(t,1)):(t=Oe(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(oe(),S(t,1,1,()=>{t=null}),se())},i(l){n||(k(t),n=!0)},o(l){S(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function ln(r){let e,n,t,l;return e=new gt({props:{$$slots:{default:[nn]},$$scope:{ctx:r}}}),t=new dt({props:{$$slots:{default:[on]},$$scope:{ctx:r}}}),{c(){y(e.$$.fragment),n=I(),y(t.$$.fragment)},l(s){A(e.$$.fragment,s),n=P(s),A(t.$$.fragment,s)},m(s,a){C(e,s,a),d(s,n,a),C(t,s,a),l=!0},p(s,a){const i={};a[1]&64&&(i.$$scope={dirty:a,ctx:s}),e.$set(i);const _={};a[0]&48|a[1]&64&&(_.$$scope={dirty:a,ctx:s}),t.$set(_)},i(s){l||(k(e.$$.fragment,s),k(t.$$.fragment,s),l=!0)},o(s){S(e.$$.fragment,s),S(t.$$.fragment,s),l=!1},d(s){s&&p(n),R(e,s),R(t,s)}}}function Be(r){let e,n;return e=new z({props:{class:r[3]?"block":"hidden",$$slots:{default:[rn]},$$scope:{ctx:r}}}),e.$on("click",r[35]),{c(){y(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,l){C(e,t,l),n=!0},p(t,l){const s={};l[0]&8&&(s.class=t[3]?"block":"hidden"),l[1]&64&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function rn(r){let e;return{c(){e=j("Update Record")},l(n){e=B(n,"Update Record")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function an(r){let e;return{c(){e=j("Next")},l(n){e=B(n,"Next")},m(n,t){d(n,e,t)},d(n){n&&p(e)}}}function fn(r){let e,n,t,l,s,a,i,_,v,w,g,N;e=new It({});function T(o){r[29](o)}let b={onOpenChange:r[16],$$slots:{default:[Ft]},$$scope:{ctx:r}};r[7]!==void 0&&(b.open=r[7]),t=new Se({props:b}),$e.push(()=>me(t,"open",T));function u(o){r[32](o)}let m={$$slots:{default:[Xt]},$$scope:{ctx:r}};r[8]!==void 0&&(m.open=r[8]),a=new Se({props:m}),$e.push(()=>me(a,"open",u));const $=[xt,Zt],D=[];function Y(o,f){return o[10]?0:1}return w=Y(r),g=D[w]=$[w](r),{c(){y(e.$$.fragment),n=I(),y(t.$$.fragment),s=I(),y(a.$$.fragment),_=I(),v=F("div"),g.c(),this.h()},l(o){A(e.$$.fragment,o),n=P(o),A(t.$$.fragment,o),s=P(o),A(a.$$.fragment,o),_=P(o),v=M(o,"DIV",{class:!0});var f=K(v);g.l(f),f.forEach(p),this.h()},h(){W(v,"class","flex flex-col h-screen")},m(o,f){C(e,o,f),d(o,n,f),C(t,o,f),d(o,s,f),C(a,o,f),d(o,_,f),d(o,v,f),D[w].m(v,null),N=!0},p(o,f){const h={};f[0]&10694|f[1]&64&&(h.$$scope={dirty:f,ctx:o}),!l&&f[0]&128&&(l=!0,h.open=o[7],_e(()=>l=!1)),t.$set(h);const H={};f[0]&770|f[1]&64&&(H.$$scope={dirty:f,ctx:o}),!i&&f[0]&256&&(i=!0,H.open=o[8],_e(()=>i=!1)),a.$set(H);let V=w;w=Y(o),w===V?D[w].p(o,f):(oe(),S(D[V],1,1,()=>{D[V]=null}),se(),g=D[w],g?g.p(o,f):(g=D[w]=$[w](o),g.c()),k(g,1),g.m(v,null))},i(o){N||(k(e.$$.fragment,o),k(t.$$.fragment,o),k(a.$$.fragment,o),k(g),N=!0)},o(o){S(e.$$.fragment,o),S(t.$$.fragment,o),S(a.$$.fragment,o),S(g),N=!1},d(o){o&&(p(n),p(s),p(_),p(v)),R(e,o),R(t,o),R(a,o),D[w].d()}}}function un(r,e,n){let t,l,s,a,i,_,v,w;X(r,Nt,c=>n(39,l=c)),X(r,Ne,c=>n(40,s=c)),X(r,De,c=>n(12,i=c)),X(r,ne,c=>n(13,_=c)),X(r,kt,c=>n(42,w=c));let{$$slots:g={},$$scope:N}=e,T=!1,b=!1,u,m,$=!1,D=!1,Y=Ae(w.url);X(r,Y,c=>n(41,a=c));let o=null,f=Ae(null);X(r,f,c=>n(2,v=c));let h=null,H=!1,V=!0,{data:U}=e;function O(){n(1,o=null),f.set(null)}function Q(){var c;return(c=u==null?void 0:u.applicationHistory)==null?void 0:c.filter(E=>E.applicationType==0||E.applicationType==1).map(E=>E.expiryDate)}async function ge(){n(9,H=!0);const c={beforeStatus:h==null?void 0:h.currentStatus,afterStatus:o,message:v,user:(i==null?void 0:i.firstName)+" "+(i==null?void 0:i.lastName),userId:i==null?void 0:i.creatorId,applicationType:h==null?void 0:h.applicationType,fileId:u==null?void 0:u.id,applicationId:h==null?void 0:h.id,fieldToUpdate:h==null?void 0:h.fieldToChange,newValue:h==null?void 0:h.newValue,fileType:u==null?void 0:u.type,dates:Q()},E=await fetch(`${pe}/api/files/UpdateApplicationStatus`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(E.ok){const J=await E.json();console.log(J),ne.set(J),n(9,H=!1),n(7,$=!1),n(8,D=!1),ee.success("Successfully updated status",{position:"top-right"}),f.set(null),n(1,o=null);const q=(i==null?void 0:i.id.toString())??"",L=(i==null?void 0:i.userRoles)??[],ce=_==null?void 0:_.type,te=_==null?void 0:_.fileStatus;n(3,T=Te(q,_.creatorAccount,L)),n(4,b=Re(L,ce,te,u.applicationHistory.map(Z=>Z.currentStatus)))}}function de(){St.set(u.type),vt.set(1),u.priorityInfo&&(u==null||u.priorityInfo.forEach(c=>{console.log(c.date),c.date.includes("/")?c.date=Et(c.date,"M/D/YYYY").format("YYYY-MM-DD"):c.date=Pt(c.date)})),Tt.set([]),Rt.set(0),Ct.set([{name:"",data:[]}]),At.set(null),yt.set([]),Dt.set(null),ne.set(u),ve(`/application?type=${u.type}`)}ft(async()=>{await ue(),Q(),console.log(u.applicationHistory.filter(c=>[0,1].includes(c.applicationType)&&![0,1].includes(c.currentStatus)))});async function ue(){n(10,V=!0);const c=a.searchParams.get("id");if(!i){const Z=ht(document.cookie);Z?De.set(Z):(console.log("the logged in user"),await ve("/auth"))}const E=(i==null?void 0:i.id.toString())??"",q=await(await fetch(`${pe}/api/files/${c}`)).json(),L=(i==null?void 0:i.userRoles)??[],ce=q.type,te=q.fileStatus;ne.set(q),n(5,u=q),n(3,T=Te(E,q.creatorAccount,L)),n(4,b=Re(L,ce,te,u.applicationHistory.map(Z=>Z.currentStatus))),n(6,m=te),n(10,V=!1)}async function be(){const c=a.searchParams.get("id");let E=s.indexOf(c);if(E!=0){E-=1;const J=s[E];!J||J===void 0?ee.info("No more files of selected type available",{position:"top-right"}):(Y.update(q=>(q.searchParams.set("id",J),q)),await ue())}else ee.info("No more files of selected type available",{position:"top-right"})}async function he(){const c=a.searchParams.get("id");let E=s.indexOf(c);E+=1;const J=s.length;E+2===J&&Je();const q=s[E];!q||q===void 0?ee.info("No more files of selected type available",{position:"top-right"}):(Y.update(L=>(L.searchParams.set("id",q),L)),await ue())}function we(c){if(c.applicationType==1&&[x.AwaitingSearch,x.AwaitingExaminer,x.Re_conduct,x.Rejected,x.KivExaminer,x.KivSearch].includes(u.applicationHistory[0].currentStatus)){ee.error("A Renewal Application  cannot be treated until the new application is treated",{position:"top-right"});return}n(6,m=c.currentStatus),h=c,n(7,$=!0)}async function Je(){const c=s.length,E=l,J=await fetch(`${pe}/api/files/GetListOfIds?index=${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:E}),q=await J.json();J.ok&&Ne.update(L=>(L=[...L,...q],console.log("updated is",L),L))}function Ge(){var E;console.log("fileData",u);const c={query:(E=u==null?void 0:u.titleOfTradeMark)==null?void 0:E.split(" ")[0],classId:u==null?void 0:u.trademarkClass,fileType:u==null?void 0:u.type};sessionStorage.setItem("searchParams",JSON.stringify(c)),window.open("/availabilitysearch","_blank")}const Ke=c=>[ie.Staff,ie.Tech].includes(c),ze=c=>n(1,o=c);function Ue(c){v=c,f.set(v)}const Qe=()=>{n(7,$=!1),O()},We=()=>n(8,D=!0);function Xe(c){$=c,n(7,$)}const Ze=()=>{n(8,D=!1)},xe=()=>ge();function et(c){D=c,n(8,D)}const tt=()=>be(),nt=()=>we(u.applicationHistory[0]),st=()=>de(),ot=()=>he();return r.$$set=c=>{"data"in c&&n(22,U=c.data),"$$scope"in c&&n(37,N=c.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&6&&n(11,t=()=>v!==null&&v!=""&&o!=null)},[de,o,v,T,b,u,m,$,D,H,V,t,i,_,Y,f,O,ge,be,he,we,Ge,U,g,Ke,ze,Ue,Qe,We,Xe,Ze,xe,et,tt,nt,st,ot,N]}class Yn extends lt{constructor(e){super(),rt(this,e,un,fn,at,{data:22,updateApplication:0},null,[-1,-1])}get updateApplication(){return this.$$.ctx[0]}}export{Yn as component};
