import{S as ae,i as ie,s as ne,n as Z,d as u,b as P,I as $,l as ee,O as oe,A as ce,M as ue,P as te,c as i,J as D,Q as de,x as s,e as g,f as w,K as J,h as S,j as v,k as F,R as fe,a as pe,g as W,t as G,T as K,U as Q}from"../chunks/DWgbY-19.js";import"../chunks/IHki7fMi.js";import{g as re}from"../chunks/BaAthLhr.js";import{p as he}from"../chunks/oPOu-fV6.js";import{b as me}from"../chunks/CPf-tfAh.js";import{l as ye}from"../chunks/B_mOdgGI.js";import"../chunks/WhpeioxD.js";function le(l){let r,e,t,a,f='<h3 id="modal-title" class="text-lg font-bold text-black">File Withdrawal</h3> <p class="text-sm text-gray-600 mt-1">Enter the File Number you want to withdraw</p>',o,m,T='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',V,y,I,b,_,M="File Number",q,p,B,x,k,n="Cancel",E,h,N,j,c=l[3]&&se(l);function X(d,L){return d[2]?_e:be}let U=X(l),C=U(l);return{c(){r=v("div"),e=v("div"),t=v("div"),a=v("div"),a.innerHTML=f,o=F(),m=v("button"),m.innerHTML=T,V=F(),y=v("div"),c&&c.c(),I=F(),b=v("div"),_=v("label"),_.textContent=M,q=F(),p=v("input"),B=F(),x=v("div"),k=v("button"),k.textContent=n,E=F(),h=v("button"),C.c(),this.h()},l(d){r=g(d,"DIV",{class:!0});var L=w(r);e=g(L,"DIV",{class:!0});var H=w(e);t=g(H,"DIV",{class:!0});var z=w(t);a=g(z,"DIV",{"data-svelte-h":!0}),J(a)!=="svelte-h3elir"&&(a.innerHTML=f),o=S(z),m=g(z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(m)!=="svelte-1dpj7tq"&&(m.innerHTML=T),z.forEach(u),V=S(H),y=g(H,"DIV",{class:!0});var O=w(y);c&&c.l(O),I=S(O),b=g(O,"DIV",{});var A=w(b);_=g(A,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(_)!=="svelte-6yzd2c"&&(_.textContent=M),q=S(A),p=g(A,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),A.forEach(u),B=S(O),x=g(O,"DIV",{class:!0});var R=w(x);k=g(R,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),J(k)!=="svelte-twelt9"&&(k.textContent=n),E=S(R),h=g(R,"BUTTON",{type:!0,class:!0});var Y=w(h);C.l(Y),Y.forEach(u),R.forEach(u),O.forEach(u),H.forEach(u),L.forEach(u),this.h()},h(){s(m,"type","button"),s(m,"class","text-gray-400 hover:text-gray-600"),s(t,"class","flex items-center justify-between mb-4"),s(_,"for","search-query"),s(_,"class","block text-sm font-medium text-gray-700 mb-2"),s(p,"id","search-query"),s(p,"type","text"),s(p,"placeholder","Enter file number"),s(p,"class","w-full p-3 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"),s(k,"type","button"),s(k,"class","flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition-colors"),s(h,"type","button"),s(h,"class","flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50"),h.disabled=l[2],s(x,"class","flex space-x-2 pt-4"),s(y,"class","space-y-4"),s(e,"class","bg-white rounded-lg p-6 w-full max-w-md mx-4"),s(r,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-overlay")},m(d,L){P(d,r,L),i(r,e),i(e,t),i(t,a),i(t,o),i(t,m),i(e,V),i(e,y),c&&c.m(y,null),i(y,I),i(y,b),i(b,_),i(b,q),i(b,p),te(p,l[1]),i(y,B),i(y,x),i(x,k),i(x,E),i(x,h),C.m(h,null),N||(j=[D(m,"click",l[4]),D(p,"input",l[11]),D(p,"keydown",l[7]),D(k,"click",l[4]),D(h,"click",l[6]),D(e,"click",de(l[10])),D(r,"click",l[5]),D(r,"keydown",l[7])],N=!0)},p(d,L){d[3]?c?c.p(d,L):(c=se(d),c.c(),c.m(y,I)):c&&(c.d(1),c=null),L&2&&p.value!==d[1]&&te(p,d[1]),U!==(U=X(d))&&(C.d(1),C=U(d),C&&(C.c(),C.m(h,null))),L&4&&(h.disabled=d[2])},d(d){d&&u(r),c&&c.d(),C.d(),N=!1,ue(j)}}}function se(l){let r,e;return{c(){r=v("div"),e=G(l[3]),this.h()},l(t){r=g(t,"DIV",{class:!0});var a=w(r);e=W(a,l[3]),a.forEach(u),this.h()},h(){s(r,"class","mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm")},m(t,a){P(t,r,a),i(r,e)},p(t,a){a&8&&pe(e,t[3])},d(t){t&&u(r)}}}function be(l){let r;return{c(){r=G("Search")},l(e){r=W(e,"Search")},m(e,t){P(e,r,t)},d(e){e&&u(r)}}}function _e(l){let r,e,t,a;return{c(){r=Q("svg"),e=Q("circle"),t=Q("path"),a=G(`\r
                            Searching...`),this.h()},l(f){r=K(f,"svg",{class:!0,fill:!0,viewBox:!0});var o=w(r);e=K(o,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),w(e).forEach(u),t=K(o,"path",{class:!0,fill:!0,d:!0}),w(t).forEach(u),o.forEach(u),a=W(f,`\r
                            Searching...`),this.h()},h(){s(e,"class","opacity-25"),s(e,"cx","12"),s(e,"cy","12"),s(e,"r","10"),s(e,"stroke","currentColor"),s(e,"stroke-width","4"),s(t,"class","opacity-75"),s(t,"fill","currentColor"),s(t,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),s(r,"class","w-4 h-4 mr-2 animate-spin inline"),s(r,"fill","none"),s(r,"viewBox","0 0 24 24")},m(f,o){P(f,r,o),i(r,e),i(r,t),P(f,a,o)},d(f){f&&(u(r),u(a))}}}function ge(l){let r,e=l[0]&&le(l);return{c(){e&&e.c(),r=$()},l(t){e&&e.l(t),r=$()},m(t,a){e&&e.m(t,a),P(t,r,a)},p(t,[a]){t[0]?e?e.p(t,a):(e=le(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},i:Z,o:Z,d(t){t&&u(r),e&&e.d(t)}}}function ve(l,r,e){let t,a;ee(l,ye,n=>e(15,t=n)),ee(l,he,n=>e(9,a=n));let{isOpen:f=!1}=r,o="",m=!1,T=null,V=null,y=null;const I=oe();let b="patent",_="Patent";ce(()=>{e(0,f=!0)});function M(){I("close"),re("/home/dashboard"),e(0,f=!1)}function q(n){n.target.classList.contains("modal-overlay")&&M()}async function p(){var n;if(!o){e(3,T="File number is required");return}if(!_){e(3,T="File type is required");return}e(2,m=!0),e(3,T=null);try{const E=await fetch(`${me}/api/files/files/${encodeURIComponent(o)}/type`),h=await E.json();if(!E.ok){e(3,T=h.message||"File not found.");return}const N=(n=h.type)==null?void 0:n.toLowerCase(),j=_.toLowerCase();if(N!==j){e(3,T=`File number and file type do not match. File number ${o} is a ${N} file.`);return}const c={query:o,fileType:_};sessionStorage.setItem("withdrawalSearchParams",JSON.stringify(c)),V=(t==null?void 0:t.firstName)||null,y=(t==null?void 0:t.email)||null,await re("/home/file-withdrawal/search/")}catch(E){e(3,T=E.message||"An error occurred during search")}finally{e(2,m=!1)}}function B(n){n.key==="Escape"&&M(),n.key==="Enter"&&p()}function x(n){fe.call(this,l,n)}function k(){o=this.value,e(1,o)}return l.$$set=n=>{"isOpen"in n&&e(0,f=n.isOpen)},l.$$.update=()=>{l.$$.dirty&768&&(e(8,b=a.url.searchParams.get("ipType")||"patent"),_=b==="trademark"?"Trademark":b==="patent"?"Patent":"Design",console.log("File Withdrawal - URL param ipType:",a.url.searchParams.get("ipType"),"ipType:",b))},[f,o,m,T,M,q,p,B,b,a,x,k]}class De extends ae{constructor(r){super(),ie(this,r,ve,ge,ne,{isOpen:0})}}export{De as component};
