import{s as j,n as T,d as m,i as v,b as y,o as h,c as g,e as I,g as P,h as _,j as S,k as L,p as M,L as k,A as w,z as H}from"../chunks/qLIpCCSV.js";import{S as $,i as q,a as p,h as C}from"../chunks/Bpqo0lwe.js";import{f as O,a as R}from"../chunks/Dr5Dm0pU.js";import{g as B}from"../chunks/sTQiEMwh.js";import{p as z}from"../chunks/4srO1X8Q.js";import{b as D}from"../chunks/DvhB1z8p.js";import{t as E}from"../chunks/C8fCgc2Z.js";import"../chunks/BXP9HJX6.js";function U(d){let t,i='<svg class="w-16 h-16 text-green-500" viewBox="0 0 24 24"><path class="checkmark-path svelte-4b8wtx" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg>',n;return{c(){t=_("div"),t.innerHTML=i,this.h()},l(s){t=g(s,"DIV",{class:!0,"data-svelte-h":!0}),w(t)!=="svelte-1qrvxm"&&(t.innerHTML=i),this.h()},h(){h(t,"class","h-full w-full bg-green-50 rounded-full flex justify-center items-center")},m(s,r){v(s,t,r)},i(s){s&&(n||k(()=>{n=C(t,O,{duration:400}),n.start()}))},o:T,d(s){s&&m(t)}}}function V(d){let t,i="Payment Successful",n;return{c(){t=_("h1"),t.textContent=i,this.h()},l(s){t=g(s,"H1",{class:!0,"data-svelte-h":!0}),w(t)!=="svelte-1niqlg0"&&(t.textContent=i),this.h()},h(){h(t,"class","text-3xl font-bold text-gray-900 mt-2 mb-4")},m(s,r){v(s,t,r)},i(s){s&&(n||k(()=>{n=C(t,R,{y:20,duration:500}),n.start()}))},o:T,d(s){s&&m(t)}}}function N(d){let t,i="YOUR APPLICATION HAS BEEN RECEIVED AND IS RECEIVING DUE ATTENTION",n,s,r,e,a="Return to Dashboard",o,f,u;return{c(){t=_("p"),t.textContent=i,s=S(),r=_("div"),e=_("button"),e.textContent=a,this.h()},l(l){t=g(l,"P",{class:!0,"data-svelte-h":!0}),w(t)!=="svelte-1uyyx7c"&&(t.textContent=i),s=P(l),r=g(l,"DIV",{class:!0});var c=I(r);e=g(c,"BUTTON",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-70a6xp"&&(e.textContent=a),c.forEach(m),this.h()},h(){h(t,"class","text-base font-medium text-gray-600 mb-8 max-w-xs mx-auto"),h(e,"class","bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-md transition-colors duration-200"),h(r,"class","mt-4")},m(l,c){v(l,t,c),v(l,s,c),v(l,r,c),y(r,e),f||(u=H(e,"click",d[3]),f=!0)},i(l){l&&(n||k(()=>{n=C(t,R,{y:15,duration:500}),n.start()})),l&&(o||k(()=>{o=C(r,O,{duration:300,delay:300}),o.start()}))},o:T,d(l){l&&(m(t),m(s),m(r)),f=!1,u()}}}function F(d){let t,i,n,s,r,e=d[0]&&U(),a=d[1]&&V(),o=d[2]&&N(d);return{c(){t=_("main"),i=_("div"),n=_("div"),e&&e.c(),s=S(),a&&a.c(),r=S(),o&&o.c(),this.h()},l(f){t=g(f,"MAIN",{class:!0});var u=I(t);i=g(u,"DIV",{class:!0});var l=I(i);n=g(l,"DIV",{class:!0});var c=I(n);e&&e.l(c),c.forEach(m),s=P(l),a&&a.l(l),r=P(l),o&&o.l(l),l.forEach(m),u.forEach(m),this.h()},h(){h(n,"class","h-32 w-32 mx-auto mb-6 relative"),h(i,"class","bg-white rounded-xl shadow-lg p-8 w-full max-w-md text-center"),h(t,"class","flex justify-center items-center min-h-screen bg-gray-50")},m(f,u){v(f,t,u),y(t,i),y(i,n),e&&e.m(n,null),y(i,s),a&&a.m(i,null),y(i,r),o&&o.m(i,null)},p(f,[u]){f[0]?e?u&1&&p(e,1):(e=U(),e.c(),p(e,1),e.m(n,null)):e&&(e.d(1),e=null),f[1]?a?u&2&&p(a,1):(a=V(),a.c(),p(a,1),a.m(i,r)):a&&(a.d(1),a=null),f[2]?o?u&4&&p(o,1):(o=N(f),o.c(),p(o,1),o.m(i,null)):o&&(o.d(1),o=null)},i(f){p(e),p(a),p(o)},o:T,d(f){f&&m(t),e&&e.d(),a&&a.d(),o&&o.d()}}}function G(d,t,i){let n;L(d,z,c=>i(7,n=c));let s=!1,r=!1,e=!1,a,o;M(async()=>{setTimeout(()=>{i(0,s=!0)},300),setTimeout(()=>{i(1,r=!0)},1e3),setTimeout(()=>{i(2,e=!0)},1800),a=n.url.searchParams.get("paymentType")??"",console.log("Payment Type:",a),a==="tradecertificate"&&(console.log("Updating status for trade certificate payment"),await f()),a==="opposition"&&(o=localStorage.getItem("rrr")??void 0??null,console.log("Updating status for opposition payment"),await u(o))});async function f(){console.log("Updating certificate payment status...");const c=localStorage.getItem("rrr")??void 0,b=localStorage.getItem("fileId")??void 0;console.log("RRR:",c),console.log("File ID:",b);const x=await fetch(`${D}/api/files/UpdateCertificatePaymentStatus?fileId=${b}&rrr=${c}`,{method:"POST"});if(!x.ok){const A=await x.json();E.error(`Error updating status: ${A.message}`);return}}async function u(c){if(!c){E.error("Payment ID is missing.");return}console.log("Updating opposition payment status...");const b=await fetch(`${D}/api/opposition/UpdateOppositionPayment?paymentId=${c}`,{method:"POST"});if(!b.ok){const x=await b.json();E.error(`Error updating status: ${x.message}`);return}}return[s,r,e,()=>B("/home/dashboard")]}class et extends ${constructor(t){super(),q(this,t,G,F,j,{})}}export{et as component};
