import{S as Ee,i as Te,s as Le,d as g,q as B,r as R,v as be,b as A,I as ue,l as Pe,O as Ie,A as Se,p as ye,M as De,P as Z,F as ge,c,w as ve,J,x as o,e as p,f as T,K as F,h as D,y as we,g as K,j as m,k as V,z as ke,t as Q,V as Ve,a as xe,n as fe,W as de,X as Ne}from"../chunks/DWgbY-19.js";import"../chunks/IHki7fMi.js";import{g as pe}from"../chunks/BaAthLhr.js";import{b as Me}from"../chunks/CPf-tfAh.js";import{l as Oe}from"../chunks/B_mOdgGI.js";import{I as Ce}from"../chunks/Ck_3zp66.js";function me(a){let t,e,l,r='<h3 id="modal-title" class="text-lg font-bold text-black">Post Registration Search</h3> <p>Search for the File</p>',s,n,v,u,h,d,i,_="File Number or RTM:",b,w,j,C,E,z,L,y,k,H,$,N,re="Cancel",ee,I,U,te,se,x=a[4]&&he(a);const ae=[Ae,Fe],O=[];function ne(f,P){return f[5]?0:1}C=ne(a),E=O[C]=ae[C](a),k=new Ce({props:{icon:"mdi:information-variant-circle",class:"mr-2 text-green-600",style:"font-size: 1.3em;"}});function oe(f,P){return f[3]?je:Re}let W=oe(a),M=W(a);return{c(){t=m("div"),e=m("div"),l=m("div"),l.innerHTML=r,s=V(),n=m("div"),x&&x.c(),v=V(),u=m("div"),h=m("div"),d=m("div"),i=m("label"),i.textContent=_,b=V(),w=m("input"),j=V(),E.c(),z=V(),L=m("div"),y=m("span"),ke(k.$$.fragment),H=Q(`\r
					Post Registration is strictly for registered files with active status.`),$=V(),N=m("button"),N.textContent=re,ee=V(),I=m("button"),M.c(),this.h()},l(f){t=p(f,"DIV",{class:!0,role:!0});var P=T(t);e=p(P,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var S=T(e);l=p(S,"DIV",{class:!0,"data-svelte-h":!0}),F(l)!=="svelte-14okla7"&&(l.innerHTML=r),s=D(S),n=p(S,"DIV",{class:!0});var X=T(n);x&&x.l(X),v=D(X),u=p(X,"DIV",{class:!0});var ie=T(u);h=p(ie,"DIV",{class:!0});var Y=T(h);d=p(Y,"DIV",{class:!0});var G=T(d);i=p(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(i)!=="svelte-1dgqn4e"&&(i.textContent=_),b=D(G),w=p(G,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),G.forEach(g),j=D(Y),E.l(Y),Y.forEach(g),ie.forEach(g),X.forEach(g),z=D(S),L=p(S,"DIV",{class:!0});var q=T(L);y=p(q,"SPAN",{class:!0});var le=T(y);we(k.$$.fragment,le),H=K(le,`\r
					Post Registration is strictly for registered files with active status.`),le.forEach(g),$=D(q),N=p(q,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),F(N)!=="svelte-18i36xv"&&(N.textContent=re),ee=D(q),I=p(q,"BUTTON",{type:!0,class:!0});var ce=T(I);M.l(ce),ce.forEach(g),q.forEach(g),S.forEach(g),P.forEach(g),this.h()},h(){o(l,"class","border-b px-6 py-4"),o(i,"for","search-query"),o(i,"class","block text-sm font-medium text-gray-700 mb-1"),o(w,"id","search-query"),o(w,"type","text"),o(w,"placeholder","Enter file number or RTM number"),o(w,"class","w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),o(d,"class","w-full md:w-2/3"),o(h,"class","flex flex-col md:flex-row gap-3"),o(u,"class","space-y-4 mx-auto"),o(n,"class","p-6"),o(y,"class","flex items-center text-xs text-gray-600"),o(N,"type","button"),o(N,"class","px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),o(I,"type","button"),I.disabled=a[3],o(I,"class","px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-green-400 disabled:cursor-not-allowed"),o(L,"class","px-6 py-4 bg-gray-50 border-t rounded-b-lg flex justify-end space-x-3"),o(e,"class","modal-content bg-white rounded-lg shadow-xl w-full max-w-md mx-auto"),o(e,"role","dialog"),o(e,"aria-modal","true"),o(e,"aria-labelledby","modal-title"),o(t,"class","modal-overlay fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"),o(t,"role","presentation")},m(f,P){A(f,t,P),c(t,e),c(e,l),c(e,s),c(e,n),x&&x.m(n,null),c(n,v),c(n,u),c(u,h),c(h,d),c(d,i),c(d,b),c(d,w),Z(w,a[1]),c(h,j),O[C].m(h,null),c(e,z),c(e,L),c(L,y),ve(k,y,null),c(y,H),c(L,$),c(L,N),c(L,ee),c(L,I),M.m(I,null),U=!0,te||(se=[J(w,"input",a[11]),J(N,"click",a[6]),J(I,"click",a[7]),J(t,"keydown",a[8])],te=!0)},p(f,P){f[4]?x?x.p(f,P):(x=he(f),x.c(),x.m(n,v)):x&&(x.d(1),x=null),P&2&&w.value!==f[1]&&Z(w,f[1]);let S=C;C=ne(f),C===S?O[C].p(f,P):(ge(),B(O[S],1,1,()=>{O[S]=null}),be(),E=O[C],E?E.p(f,P):(E=O[C]=ae[C](f),E.c()),R(E,1),E.m(h,null)),W!==(W=oe(f))&&(M.d(1),M=W(f),M&&(M.c(),M.m(I,null))),(!U||P&8)&&(I.disabled=f[3])},i(f){U||(R(E),R(k.$$.fragment,f),U=!0)},o(f){B(E),B(k.$$.fragment,f),U=!1},d(f){f&&g(t),x&&x.d(),O[C].d(),ye(k),M.d(),te=!1,De(se)}}}function he(a){let t,e;return{c(){t=m("div"),e=Q(a[4]),this.h()},l(l){t=p(l,"DIV",{class:!0});var r=T(t);e=K(r,a[4]),r.forEach(g),this.h()},h(){o(t,"class","mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm")},m(l,r){A(l,t,r),c(t,e)},p(l,r){r&16&&xe(e,l[4])},d(l){l&&g(t)}}}function Fe(a){let t,e,l="File Type",r,s,n,v,u=a[2].charAt(0).toUpperCase()+a[2].slice(1)+"",h,d;return n=new Ce({props:{icon:_e(a[2]),class:"w-4 h-4 mr-2 text-green-600"}}),{c(){t=m("div"),e=m("label"),e.textContent=l,r=V(),s=m("div"),ke(n.$$.fragment),v=V(),h=Q(u),this.h()},l(i){t=p(i,"DIV",{class:!0});var _=T(t);e=p(_,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(e)!=="svelte-3xj6mi"&&(e.textContent=l),r=D(_),s=p(_,"DIV",{class:!0});var b=T(s);we(n.$$.fragment,b),v=D(b),h=K(b,u),b.forEach(g),_.forEach(g),this.h()},h(){o(e,"for","file-type-display"),o(e,"class","block text-sm font-medium text-gray-700 mb-1"),o(s,"class","w-full p-2 border border-gray-200 bg-gray-50 rounded-md text-gray-700 flex items-center"),o(t,"class","w-full md:w-1/3")},m(i,_){A(i,t,_),c(t,e),c(t,r),c(t,s),ve(n,s,null),c(s,v),c(s,h),d=!0},p(i,_){const b={};_&4&&(b.icon=_e(i[2])),n.$set(b),(!d||_&4)&&u!==(u=i[2].charAt(0).toUpperCase()+i[2].slice(1)+"")&&xe(h,u)},i(i){d||(R(n.$$.fragment,i),d=!0)},o(i){B(n.$$.fragment,i),d=!1},d(i){i&&g(t),ye(n)}}}function Ae(a){let t,e,l="File Type",r,s,n,v="Patent",u,h="Trademark",d,i;return{c(){t=m("div"),e=m("label"),e.textContent=l,r=V(),s=m("select"),n=m("option"),n.textContent=v,u=m("option"),u.textContent=h,this.h()},l(_){t=p(_,"DIV",{class:!0});var b=T(t);e=p(b,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(e)!=="svelte-ldg83n"&&(e.textContent=l),r=D(b),s=p(b,"SELECT",{id:!0,class:!0});var w=T(s);n=p(w,"OPTION",{"data-svelte-h":!0}),F(n)!=="svelte-l9ykna"&&(n.textContent=v),u=p(w,"OPTION",{"data-svelte-h":!0}),F(u)!=="svelte-ijrak8"&&(u.textContent=h),w.forEach(g),b.forEach(g),this.h()},h(){o(e,"for","file-type"),o(e,"class","block text-sm font-medium text-gray-700 mb-1"),n.__value="patent",Z(n,n.__value),u.__value="trademark",Z(u,u.__value),o(s,"id","file-type"),o(s,"class","border rounded w-full p-2"),a[2]===void 0&&Ne(()=>a[12].call(s)),o(t,"class","w-full md:w-1/3")},m(_,b){A(_,t,b),c(t,e),c(t,r),c(t,s),c(s,n),c(s,u),de(s,a[2],!0),d||(i=J(s,"change",a[12]),d=!0)},p(_,b){b&4&&de(s,_[2])},i:fe,o:fe,d(_){_&&g(t),d=!1,i()}}}function Re(a){let t;return{c(){t=Q("Search")},l(e){t=K(e,"Search")},m(e,l){A(e,t,l)},d(e){e&&g(t)}}}function je(a){let t,e='<svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>',l;return{c(){t=m("span"),t.innerHTML=e,l=Q(`\r
						Searching...`),this.h()},l(r){t=p(r,"SPAN",{class:!0,"data-svelte-h":!0}),F(t)!=="svelte-1fx6cor"&&(t.innerHTML=e),l=K(r,`\r
						Searching...`),this.h()},h(){o(t,"class","inline-block mr-2")},m(r,s){A(r,t,s),A(r,l,s)},d(r){r&&(g(t),g(l))}}}function qe(a){let t,e,l=a[0]&&me(a);return{c(){l&&l.c(),t=ue()},l(r){l&&l.l(r),t=ue()},m(r,s){l&&l.m(r,s),A(r,t,s),e=!0},p(r,[s]){r[0]?l?(l.p(r,s),s&1&&R(l,1)):(l=me(r),l.c(),R(l,1),l.m(t.parentNode,t)):l&&(ge(),B(l,1,1,()=>{l=null}),be())},i(r){e||(R(l),e=!0)},o(r){B(l),e=!1},d(r){r&&g(t),l&&l.d(r)}}}function _e(a){return{trademark:"mdi:scale-balance",patent:"mdi:lightbulb-outline",design:"mdi:palette-outline"}[a.toLowerCase()]||"mdi:file"}function Be(a,t,e){let l,r;Pe(a,Oe,y=>e(15,r=y));let{isOpen:s=!1}=t,n="",v="patent",u=null,h=!1,d=!1,i=null,_=null,b=null;const w=Ie();Se(()=>{e(0,s=!0)});function j(){w("close"),pe("/home/dashboard"),e(0,s=!1)}async function C(){if(!n){e(4,i="Please enter a file number");return}if(!v){e(4,i="Please select a file type");return}e(3,d=!0),e(4,i=null);try{const y=await fetch(`${Me}/api/files/files/${encodeURIComponent(n.trim())}/type`),k=await y.json();if(!y.ok){e(4,i=k.message||"File not found."),e(3,d=!1);return}if(k.type.toLowerCase()!==v.toLowerCase()){e(4,i=`File type mismatch. You selected "${v}", but file is "${k.type}".`),e(3,d=!1);return}const H={query:n,fileType:v};sessionStorage.setItem("searchParams",JSON.stringify(H)),_=(r==null?void 0:r.firstName)+" "+(r==null?void 0:r.lastName)||"Unknown",b=(r==null?void 0:r.email)||"unknown@email.com",await pe("/home/postregistration/search/")}catch{e(4,i="Error checking file type.")}finally{e(3,d=!1)}}function E(y){y.key==="Escape"&&j(),y.key==="Enter"&&C()}function z(){n=this.value,e(1,n)}function L(){v=Ve(this),e(2,v),e(10,h)}return a.$$set=y=>{"isOpen"in y&&e(0,s=y.isOpen)},a.$$.update=()=>{if(a.$$.dirty&1024&&typeof window<"u"){const y=new URLSearchParams(window.location.search),k=y.get("ipType")||y.get("context");k&&!h&&(e(9,u=k.toLowerCase()),k.toLowerCase()==="trademark"?e(2,v="trademark"):k.toLowerCase()==="patent"&&e(2,v="patent"),e(10,h=!0))}a.$$.dirty&512&&e(5,l=!u)},[s,n,v,d,i,l,j,C,E,u,h,z,L]}class We extends Ee{constructor(t){super(),Te(this,t,Be,qe,Le,{isOpen:0})}}export{We as component};
