import{ab as Y,ak as Z,al as $,S as ee,i as te,s as ne,B as oe,q as se,r as re,C as ie,D as ce,E as ae,l as le}from"./Cccy056x.js";import"./IHki7fMi.js";import{d as W,w as ue}from"./Bx4tD3iK.js";import{o as de,w as fe,m as E,b as V,a as P,c as pe,u as x,n as v,s as K,d as A,p as ge,k as M,i as q,f as Oe}from"./R6lDc60d.js";import{t as H,g as ye,o as me,u as be,c as ke,a as Ce,b as Ee,h as L,r as ve,d as _e,e as he}from"./DiLihhuY.js";import{c as Fe}from"./B9zgB7jn.js";const{name:_}=pe("dialog"),Se={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Te=["content","title","description"];function Ae(o){const n={...Se,...o},i=H(de(n,"ids")),{preventScroll:c,closeOnEscape:r,closeOnOutsideClick:f,role:h,portal:O,forceVisible:y,openFocus:F,closeFocus:p,onOutsideClick:m}=i,b=fe.writable(null),l=H({...ye(Te),...n.ids}),S=n.open??ue(n.defaultOpen),u=me(S,n==null?void 0:n.onOpenChange),d=W([u,y],([e,a])=>e||a);let k=v;function D(e){const a=e.currentTarget,s=e.currentTarget;!q(a)||!q(s)||(u.set(!0),b.set(s))}function t(){u.set(!1),L({prop:p.get(),defaultEl:b.get()})}const N=E(_("trigger"),{stores:[u],returned:([e])=>({"aria-haspopup":"dialog","aria-expanded":e,type:"button"}),action:e=>({destroy:V(P(e,"click",s=>{D(s)}),P(e,"keydown",s=>{s.key!==M.ENTER&&s.key!==M.SPACE||(s.preventDefault(),D(s))}))})}),I=E(_("overlay"),{stores:[d,u],returned:([e,a])=>({hidden:e?void 0:!0,tabindex:-1,style:K({display:e?void 0:"none"}),"aria-hidden":!0,"data-state":a?"open":"closed"}),action:e=>{let a=v;if(r.get()){const s=x(e,{handler:()=>{t()}});s&&s.destroy&&(a=s.destroy)}return{destroy(){a()}}}}),j=E(_("content"),{stores:[d,l.content,l.description,l.title,u],returned:([e,a,s,T,g])=>({id:a,role:h.get(),"aria-describedby":s,"aria-labelledby":T,"aria-modal":e?"true":void 0,"data-state":g?"open":"closed",tabindex:-1,hidden:e?void 0:!0,style:K({display:e?void 0:"none"})}),action:e=>{let a=v,s=v;const T=V(A([u,f,r],([g,R,w])=>{if(!g)return;const C=ke({immediate:!1,escapeDeactivates:w,clickOutsideDeactivates:R,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:e});a=C.activate,s=C.deactivate;const B=C.useFocusTrap(e);return B&&B.destroy?B.destroy:C.deactivate}),A([f,u],([g,R])=>be(e,{open:R,closeOnInteractOutside:g,onClose(){t()},shouldCloseOnInteractOutside(w){var C;return(C=m.get())==null||C(w),!w.defaultPrevented}}).destroy),A([r],([g])=>g?x(e,{handler:t}).destroy:v),A([d],([g])=>{Y().then(()=>{g?a():s()})}));return{destroy:()=>{k(),T()}}}}),z=E(_("portalled"),{stores:O,returned:e=>({"data-portal":ge(e)}),action:e=>{const a=A([O],([s])=>{if(s===null)return v;const T=Ce(e,s);return T===null?v:Ee(e,T).destroy});return{destroy(){a()}}}}),J=E(_("title"),{stores:[l.title],returned:([e])=>({id:e})}),Q=E(_("description"),{stores:[l.description],returned:([e])=>({id:e})}),X=E(_("close"),{returned:()=>({type:"button"}),action:e=>({destroy:V(P(e,"click",()=>{t()}),P(e,"keydown",s=>{s.key!==M.SPACE&&s.key!==M.ENTER||(s.preventDefault(),t())}))})});return A([u,c],([e,a])=>{if(Oe){if(a&&e&&(k=ve()),e){const s=document.getElementById(l.content.get());L({prop:F.get(),defaultEl:s})}return()=>{y.get()||k()}}}),{ids:l,elements:{content:j,trigger:N,title:J,description:Q,overlay:I,close:X,portalled:z},states:{open:u},options:i}}function G(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function De(o){const{NAME:n,PARTS:i}=G(),c=Fe(n,i),r={...Ae({..._e(o),role:"dialog",forceVisible:!0}),getAttrs:c};return Z(n,r),{...r,updateOption:he(r.options)}}function Ke(){const{NAME:o}=G();return $(o)}const we=o=>({ids:o&1}),U=o=>({ids:o[0]});function Pe(o){let n;const i=o[12].default,c=oe(i,o,o[11],U);return{c(){c&&c.c()},l(r){c&&c.l(r)},m(r,f){c&&c.m(r,f),n=!0},p(r,[f]){c&&c.p&&(!n||f&2049)&&ie(c,i,r,r[11],n?ae(i,r[11],f,we):ce(r[11]),U)},i(r){n||(re(c,r),n=!0)},o(r){se(c,r),n=!1},d(r){c&&c.d(r)}}}function Me(o,n,i){let c,{$$slots:r={},$$scope:f}=n,{preventScroll:h=void 0}=n,{closeOnEscape:O=void 0}=n,{closeOnOutsideClick:y=void 0}=n,{portal:F=void 0}=n,{open:p=void 0}=n,{onOpenChange:m=void 0}=n,{openFocus:b=void 0}=n,{closeFocus:l=void 0}=n,{onOutsideClick:S=void 0}=n;const{states:{open:u},updateOption:d,ids:k}=De({closeOnEscape:O,preventScroll:h,closeOnOutsideClick:y,portal:F,forceVisible:!0,defaultOpen:p,openFocus:b,closeFocus:l,onOutsideClick:S,onOpenChange:({next:t})=>(p!==t&&(m==null||m(t),i(2,p=t)),t)}),D=W([k.content,k.description,k.title],([t,N,I])=>({content:t,description:N,title:I}));return le(o,D,t=>i(0,c=t)),o.$$set=t=>{"preventScroll"in t&&i(3,h=t.preventScroll),"closeOnEscape"in t&&i(4,O=t.closeOnEscape),"closeOnOutsideClick"in t&&i(5,y=t.closeOnOutsideClick),"portal"in t&&i(6,F=t.portal),"open"in t&&i(2,p=t.open),"onOpenChange"in t&&i(7,m=t.onOpenChange),"openFocus"in t&&i(8,b=t.openFocus),"closeFocus"in t&&i(9,l=t.closeFocus),"onOutsideClick"in t&&i(10,S=t.onOutsideClick),"$$scope"in t&&i(11,f=t.$$scope)},o.$$.update=()=>{o.$$.dirty&4&&p!==void 0&&u.set(p),o.$$.dirty&8&&d("preventScroll",h),o.$$.dirty&16&&d("closeOnEscape",O),o.$$.dirty&32&&d("closeOnOutsideClick",y),o.$$.dirty&64&&d("portal",F),o.$$.dirty&256&&d("openFocus",b),o.$$.dirty&512&&d("closeFocus",l),o.$$.dirty&1024&&d("onOutsideClick",S)},[c,D,p,h,O,y,F,m,b,l,S,f,r]}class qe extends ee{constructor(n){super(),te(this,n,Me,Pe,ne,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}export{qe as D,Ae as c,Ke as g};
