import{w as g}from"./6yonPF-0.js";import{s as p,w as I,n as w}from"./rHe4zC9v.js";import{f as y,i,w as A}from"./DxtHn-BA.js";import{L as v}from"./DWgbY-19.js";function N(e){e.setAttribute("data-highlighted","")}function _(e){e.removeAttribute("data-highlighted")}function C(e,t=500){let r=null;return function(...a){const o=()=>{r=null,e(...a)};r&&clearTimeout(r),r=setTimeout(o,t)}}function T(e){y&&p(1).then(()=>{const t=document.activeElement;!i(t)||t===e||(t.tabIndex=-1,e&&(e.tabIndex=0,e.focus()))})}function b(){return Array.from(document.querySelectorAll('a[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])'))}function j(e){const t=b(),a=t.indexOf(e)+1,o=t[a];return a<t.length&&i(o)?o:null}function k(e){const t=b(),a=t.indexOf(e)-1,o=t[a];return a>=0&&i(o)?o:null}const L=new Set(["Shift","Control","Alt","Meta","CapsLock","NumLock"]),S={onMatch:T,getCurrentItem:()=>document.activeElement};function q(e={}){const t={...S,...e},r=A(g([])),a=C(()=>{r.update(()=>[])});return{typed:r,resetTyped:a,handleTypeaheadSearch:(l,m)=>{if(L.has(l))return;const u=t.getCurrentItem(),s=v(r);if(!Array.isArray(s))return;s.push(l.toLowerCase()),r.set(s);const f=m.filter(n=>!(n.getAttribute("disabled")==="true"||n.getAttribute("aria-disabled")==="true"||n.hasAttribute("data-disabled"))),h=s.length>1&&s.every(n=>n===s[0])?s[0]:s.join(""),x=i(u)?f.indexOf(u):-1;let c=I(f,Math.max(x,0));h.length===1&&(c=c.filter(n=>n!==u));const d=c.find(n=>(n==null?void 0:n.innerText)&&n.innerText.toLowerCase().startsWith(h.toLowerCase()));i(d)&&d!==u&&t.onMatch(d),a()}}}function z(){return w(10)}export{k as a,N as b,q as c,z as d,j as g,T as h,_ as r};
