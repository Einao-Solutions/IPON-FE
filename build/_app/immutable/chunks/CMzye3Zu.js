import{d as x}from"./Bx4tD3iK.js";import{n as m,i as l,u as P,b as v}from"./R6lDc60d.js";import{a as O,f as A,o as $,s as C,b as T,c as W,d as F}from"./CAD1rjYr.js";import{b as j,c as D,u as M}from"./DiLihhuY.js";function L(e){const{open:s,forceVisible:a,activeTrigger:t}=e;return x([s,a,t],([i,o,r])=>(i||o)&&r!==null)}const V={strategy:"absolute",placement:"top",gutter:5,flip:!0,sameWidth:!1,overflowPadding:8},k={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function K(e,s,a={}){if(!s||!e||a===null)return{destroy:m};const t={...V,...a},i=s.querySelector("[data-arrow=true]"),o=[];t.flip&&o.push(A({boundary:t.boundary,padding:t.overflowPadding}));const r=l(i)?i.offsetHeight/2:0;if(t.gutter||t.offset){const n=t.gutter?{mainAxis:t.gutter}:t.offset;(n==null?void 0:n.mainAxis)!=null&&(n.mainAxis+=r),o.push($(n))}o.push(C({boundary:t.boundary,crossAxis:t.overlap,padding:t.overflowPadding})),i&&o.push(T({element:i,padding:8})),o.push(W({padding:t.overflowPadding,apply({rects:n,availableHeight:c,availableWidth:u}){t.sameWidth&&Object.assign(s.style,{width:`${Math.round(n.reference.width)}px`,minWidth:"unset"}),t.fitViewport&&Object.assign(s.style,{maxWidth:`${u}px`,maxHeight:`${c}px`})}}));function d(){if(!e||!s||l(e)&&!e.ownerDocument.documentElement.contains(e))return;const{placement:n,strategy:c}=t;F(e,s,{placement:n,middleware:o,strategy:c}).then(u=>{const y=Math.round(u.x),h=Math.round(u.y),[b,w]=R(u.placement);if(s.setAttribute("data-side",b),s.setAttribute("data-align",w),Object.assign(s.style,{position:t.strategy,top:`${h}px`,left:`${y}px`}),l(i)&&u.middlewareData.arrow){const{x:p,y:g}=u.middlewareData.arrow,f=u.placement.split("-")[0];i.setAttribute("data-side",f),Object.assign(i.style,{position:"absolute",left:p!=null?`${p}px`:"",top:g!=null?`${g}px`:"",[f]:`calc(100% - ${r}px)`,transform:k[f],backgroundColor:"inherit",zIndex:"inherit"})}return u})}return Object.assign(s.style,{position:t.strategy}),{destroy:O(e,s,d)}}function R(e){const[s,a="center"]=e.split("-");return[s,a]}const H={floating:{},focusTrap:{},modal:{},escapeKeydown:{},portal:"body"},N=(e,s)=>{e.dataset.escapee="";const{anchorElement:a,open:t,options:i}=s;if(!a||!t||!i)return{destroy:m};const o={...H,...i},r=[];if(o.portal!==null&&r.push(j(e,o.portal).destroy),r.push(K(a,e,o.floating).destroy),o.focusTrap!==null){const{useFocusTrap:n}=D({immediate:!0,escapeDeactivates:!1,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:e,...o.focusTrap});r.push(n(e).destroy)}o.modal!==null&&r.push(M(e,{onClose:()=>{l(a)&&(t.set(!1),a.focus())},shouldCloseOnInteractOutside:n=>!(n.defaultPrevented||l(a)&&a.contains(n.target)),...o.modal}).destroy),o.escapeKeydown!==null&&r.push(P(e,{enabled:t,handler:()=>{t.set(!1)},...o.escapeKeydown}).destroy);const d=v(...r);return{destroy(){d()}}};function _(e){return(s={})=>S(e,s)}function S(e,s){const t={...{side:"bottom",align:"center",sideOffset:0,alignOffset:0,sameWidth:!1,avoidCollisions:!0,collisionPadding:8,fitViewport:!1,strategy:"absolute",overlap:!1},...s};e.update(i=>({...i,placement:z(t.side,t.align),offset:{...i.offset,mainAxis:t.sideOffset,crossAxis:t.alignOffset},gutter:0,sameWidth:t.sameWidth,flip:t.avoidCollisions,overflowPadding:t.collisionPadding,boundary:t.collisionBoundary,fitViewport:t.fitViewport,strategy:t.strategy,overlap:t.overlap}))}function z(e,s){return s==="center"?e:`${e}-${s}`}export{L as d,_ as g,N as u};
