import{a0 as Y,a7 as Z,a8 as $,s as ee,q as te,u as ne,r as oe,v as se,k as re}from"./qLIpCCSV.js";import{S as ie,i as ce,t as ae,a as le}from"./Bpqo0lwe.js";import{d as W,w as ue}from"./CWqQW7tL.js";import{o as de,w as fe,m as v,b as x,a as P,c as pe,u as B,n as E,s as K,d as A,p as ge,k as M,i as q,f as Oe}from"./BjHBLxYU.js";import{t as H,g as ye,o as me,u as ke,c as be,a as Ce,b as ve,h as L,r as Ee,d as _e,e as he}from"./BOlN8JeH.js";import{c as Fe}from"./B9zgB7jn.js";const{name:_}=pe("dialog"),Se={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Te=["content","title","description"];function Ae(o){const n={...Se,...o},i=H(de(n,"ids")),{preventScroll:c,closeOnEscape:r,closeOnOutsideClick:f,role:h,portal:O,forceVisible:y,openFocus:F,closeFocus:p,onOutsideClick:m}=i,k=fe.writable(null),l=H({...ye(Te),...n.ids}),S=n.open??ue(n.defaultOpen),u=me(S,n==null?void 0:n.onOpenChange),d=W([u,y],([e,a])=>e||a);let b=E;function w(e){const a=e.currentTarget,s=e.currentTarget;!q(a)||!q(s)||(u.set(!0),k.set(s))}function t(){u.set(!1),L({prop:p.get(),defaultEl:k.get()})}const N=v(_("trigger"),{stores:[u],returned:([e])=>({"aria-haspopup":"dialog","aria-expanded":e,type:"button"}),action:e=>({destroy:x(P(e,"click",s=>{w(s)}),P(e,"keydown",s=>{s.key!==M.ENTER&&s.key!==M.SPACE||(s.preventDefault(),w(s))}))})}),I=v(_("overlay"),{stores:[d,u],returned:([e,a])=>({hidden:e?void 0:!0,tabindex:-1,style:K({display:e?void 0:"none"}),"aria-hidden":!0,"data-state":a?"open":"closed"}),action:e=>{let a=E;if(r.get()){const s=B(e,{handler:()=>{t()}});s&&s.destroy&&(a=s.destroy)}return{destroy(){a()}}}}),j=v(_("content"),{stores:[d,l.content,l.description,l.title,u],returned:([e,a,s,T,g])=>({id:a,role:h.get(),"aria-describedby":s,"aria-labelledby":T,"aria-modal":e?"true":void 0,"data-state":g?"open":"closed",tabindex:-1,hidden:e?void 0:!0,style:K({display:e?void 0:"none"})}),action:e=>{let a=E,s=E;const T=x(A([u,f,r],([g,R,D])=>{if(!g)return;const C=be({immediate:!1,escapeDeactivates:D,clickOutsideDeactivates:R,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:e});a=C.activate,s=C.deactivate;const V=C.useFocusTrap(e);return V&&V.destroy?V.destroy:C.deactivate}),A([f,u],([g,R])=>ke(e,{open:R,closeOnInteractOutside:g,onClose(){t()},shouldCloseOnInteractOutside(D){var C;return(C=m.get())==null||C(D),!D.defaultPrevented}}).destroy),A([r],([g])=>g?B(e,{handler:t}).destroy:E),A([d],([g])=>{Y().then(()=>{g?a():s()})}));return{destroy:()=>{b(),T()}}}}),z=v(_("portalled"),{stores:O,returned:e=>({"data-portal":ge(e)}),action:e=>{const a=A([O],([s])=>{if(s===null)return E;const T=Ce(e,s);return T===null?E:ve(e,T).destroy});return{destroy(){a()}}}}),J=v(_("title"),{stores:[l.title],returned:([e])=>({id:e})}),Q=v(_("description"),{stores:[l.description],returned:([e])=>({id:e})}),X=v(_("close"),{returned:()=>({type:"button"}),action:e=>({destroy:x(P(e,"click",()=>{t()}),P(e,"keydown",s=>{s.key!==M.SPACE&&s.key!==M.ENTER||(s.preventDefault(),t())}))})});return A([u,c],([e,a])=>{if(Oe){if(a&&e&&(b=Ee()),e){const s=document.getElementById(l.content.get());L({prop:F.get(),defaultEl:s})}return()=>{y.get()||b()}}}),{ids:l,elements:{content:j,trigger:N,title:J,description:Q,overlay:I,close:X,portalled:z},states:{open:u},options:i}}function G(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function we(o){const{NAME:n,PARTS:i}=G(),c=Fe(n,i),r={...Ae({..._e(o),role:"dialog",forceVisible:!0}),getAttrs:c};return Z(n,r),{...r,updateOption:he(r.options)}}function Ke(){const{NAME:o}=G();return $(o)}const De=o=>({ids:o&1}),U=o=>({ids:o[0]});function Pe(o){let n;const i=o[12].default,c=te(i,o,o[11],U);return{c(){c&&c.c()},l(r){c&&c.l(r)},m(r,f){c&&c.m(r,f),n=!0},p(r,[f]){c&&c.p&&(!n||f&2049)&&ne(c,i,r,r[11],n?se(i,r[11],f,De):oe(r[11]),U)},i(r){n||(le(c,r),n=!0)},o(r){ae(c,r),n=!1},d(r){c&&c.d(r)}}}function Me(o,n,i){let c,{$$slots:r={},$$scope:f}=n,{preventScroll:h=void 0}=n,{closeOnEscape:O=void 0}=n,{closeOnOutsideClick:y=void 0}=n,{portal:F=void 0}=n,{open:p=void 0}=n,{onOpenChange:m=void 0}=n,{openFocus:k=void 0}=n,{closeFocus:l=void 0}=n,{onOutsideClick:S=void 0}=n;const{states:{open:u},updateOption:d,ids:b}=we({closeOnEscape:O,preventScroll:h,closeOnOutsideClick:y,portal:F,forceVisible:!0,defaultOpen:p,openFocus:k,closeFocus:l,onOutsideClick:S,onOpenChange:({next:t})=>(p!==t&&(m==null||m(t),i(2,p=t)),t)}),w=W([b.content,b.description,b.title],([t,N,I])=>({content:t,description:N,title:I}));return re(o,w,t=>i(0,c=t)),o.$$set=t=>{"preventScroll"in t&&i(3,h=t.preventScroll),"closeOnEscape"in t&&i(4,O=t.closeOnEscape),"closeOnOutsideClick"in t&&i(5,y=t.closeOnOutsideClick),"portal"in t&&i(6,F=t.portal),"open"in t&&i(2,p=t.open),"onOpenChange"in t&&i(7,m=t.onOpenChange),"openFocus"in t&&i(8,k=t.openFocus),"closeFocus"in t&&i(9,l=t.closeFocus),"onOutsideClick"in t&&i(10,S=t.onOutsideClick),"$$scope"in t&&i(11,f=t.$$scope)},o.$$.update=()=>{o.$$.dirty&4&&p!==void 0&&u.set(p),o.$$.dirty&8&&d("preventScroll",h),o.$$.dirty&16&&d("closeOnEscape",O),o.$$.dirty&32&&d("closeOnOutsideClick",y),o.$$.dirty&64&&d("portal",F),o.$$.dirty&256&&d("openFocus",k),o.$$.dirty&512&&d("closeFocus",l),o.$$.dirty&1024&&d("onOutsideClick",S)},[c,w,p,h,O,y,F,m,k,l,S,f,r]}class qe extends ie{constructor(n){super(),ce(this,n,Me,Pe,ee,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}export{qe as D,Ae as c,Ke as g};
