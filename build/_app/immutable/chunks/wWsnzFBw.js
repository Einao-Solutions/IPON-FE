import{a3 as re,L as P,ak as J,ab as I,al as j}from"./Cccy056x.js";import{w as k,d as Ce}from"./Bx4tD3iK.js";import{n as Ae}from"./DiLihhuY.js";const te=1,_e=.9,Oe=.8,ge=.17,H=.1,q=.999,Re=.9999,Te=.99,Pe=/[\\/_+.#"@[({&]/,ye=/[\\/_+.#"@[({&]/g,be=/[\s-]/,ce=/[\s-]/g;function Y(n,c,s,u,l,i,C){if(i===c.length)return l===n.length?te:Te;const h=`${l},${i}`;if(C[h]!==void 0)return C[h];const S=u.charAt(i);let d=s.indexOf(S,l),g=0,a,A,N,M;for(;d>=0;)a=Y(n,c,s,u,d+1,i+1,C),a>g&&(d===l?a*=te:Pe.test(n.charAt(d-1))?(a*=Oe,N=n.slice(l,d-1).match(ye),N&&l>0&&(a*=Math.pow(q,N.length))):be.test(n.charAt(d-1))?(a*=_e,M=n.slice(l,d-1).match(ce),M&&l>0&&(a*=Math.pow(q,M.length))):(a*=ge,l>0&&(a*=Math.pow(q,d-l))),n.charAt(d)!==c.charAt(i)&&(a*=Re)),(a<H&&s.charAt(d-1)===u.charAt(i+1)||u.charAt(i+1)===u.charAt(i)&&s.charAt(d-1)!==u.charAt(i))&&(A=Y(n,c,s,u,d+1,i+2,C),A*H>a&&(a=A*H)),a>g&&(g=a),d=s.indexOf(S,d+1);return C[h]=g,g}function ne(n){return n.toLowerCase().replace(ce," ")}function Ne(n,c){return Y(n,c,ne(n),ne(c),0,0,{})}const Ke=typeof document<"u";function se(n){return n===void 0}function R(){return Ae(10)}const v={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",END:"End",ENTER:"Enter",HOME:"Home"};function Me(n,...c){const s={};for(const u of Object.keys(n))c.includes(u)||(s[u]=n[u]);return s}function ue(n){const c={};for(const s in n){const u=n[s];u!==void 0&&(c[s]=u)}return c}function ke(n){const c={};return Object.keys(n).forEach(s=>{const u=s,l=n[u];c[u]=k(l)}),c}function y(n,c){const s=we(n,(u,l)=>({stores:u,onUnsubscribe:l})).subscribe(({stores:u,onUnsubscribe:l})=>{const i=c(u);i&&l(i)});return re(s),s}function we(n,c){let s=[];const u=h=>{s.push(h)},l=()=>{s.forEach(h=>h()),s=[]},i=Ce(n,h=>(l(),c(h,u)));return re(l),{...i,subscribe:(...h)=>{const S=i.subscribe(...h);return()=>{S(),l()}}}}const le="Command",ie="CommandState",fe="CommandGroup",De="[data-cmdk-list-sizer]",G="[data-cmdk-group]",oe="[data-cmdk-group-items]",Ue="[data-cmdk-group-heading]",Le="[data-cmdk-item]",X=`${Le}:not([aria-disabled="true"])`,b="data-value",ae=(n,c)=>Ne(n,c);function He(){return j(le)}function qe(){return j(ie)}function Xe(n){const c=R();return J(fe,{id:c,alwaysRender:se(n)?!1:n}),{id:c}}function Je(){const n=j(fe);if(n)return n}function ve(n){const c={search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}};return k(n?{...c,...ue(n)}:c)}const Ge={label:"Command menu",shouldFilter:!0,loop:!1,onValueChange:void 0,value:void 0,filter:ae,ids:{root:R(),list:R(),label:R(),input:R()}};function Ye(n){const c={root:R(),list:R(),label:R(),input:R(),...n.ids},s={...Ge,...ue(n)},u=n.state??ve({value:s.value}),l=k(new Set),i=k(new Map),C=k(new Map),h=k(null),S=ke(Me(s,"value","ids"));let d=P(l),g=P(i),a=P(C),A=P(S.shouldFilter),N=P(S.loop),M=P(S.label),x=P(S.filter);y(S.shouldFilter,e=>{A=e}),y(S.loop,e=>{N=e}),y(S.filter,e=>{x=e}),y(S.label,e=>{M=e}),y(l,e=>{d=e}),y(i,e=>{g=e}),y(C,e=>{a=e});const de={value:(e,o)=>{o!==a.get(e)&&(C.update(t=>(t.set(e,o),t)),u.update(t=>(t.filtered.items.set(e,Q(o,t.search)),t)))},item:(e,o)=>(l.update(t=>t.add(e)),o&&i.update(t=>{var r;return t.has(o)?(r=t.get(o))==null||r.add(e):t.set(o,new Set([e])),t}),u.update(t=>{const r=V(t,A);if(!r.value){const f=W();r.value=f??""}return r}),()=>{C.update(t=>(t.delete(e),t)),l.update(t=>(t.delete(e),t)),u.update(t=>{t.filtered.items.delete(e);const r=U(),f=V(t);return(r==null?void 0:r.getAttribute("id"))===e&&(f.value=W()??""),t})}),group:e=>(i.update(o=>(o.has(e)||o.set(e,new Set),o)),()=>{C.update(o=>(o.delete(e),o)),i.update(o=>(o.delete(e),o))}),filter:()=>A,label:M||n["aria-label"]||"",commandEl:h,ids:c,updateState:w};function w(e,o,t){u.update(r=>{var f;return Object.is(r[e],o)||(r[e]=o,e==="search"?(r=V(r,A),r=me(r,A),I().then(()=>u.update(T=>{var L;return T.value=W()??"",(L=n.onValueChange)==null||L.call(n,T.value),T}))):e==="value"&&((f=n.onValueChange)==null||f.call(n,r.value),t||I().then(()=>Ee()))),r})}function V(e,o){const t=o??A;if(!e.search||!t)return e.filtered.count=d.size,e;e.filtered.groups=new Set;let r=0;for(const f of d){const _=a.get(f),p=Q(_,e.search);e.filtered.items.set(f,p),p>0&&r++}for(const[f,_]of g)for(const p of _){const T=e.filtered.items.get(p);T&&T>0&&e.filtered.groups.add(f)}return e.filtered.count=r,e}function me(e,o){var L;const t=o??A;if(!e.search||!t)return e;const r=e.filtered.items,f=[];for(const E of e.filtered.groups){const m=g.get(E);if(!m)continue;let O=0;for(const K of m){const ee=r.get(K);se(ee)||(O=Math.max(ee,O))}f.push([E,O])}const _=document.getElementById(c.root);if(!_)return e;const p=_.querySelector(De),T=D(_).sort((E,m)=>{const O=E.getAttribute(b)??"",K=m.getAttribute(b)??"";return(r.get(O)??0)-(r.get(K)??0)});for(const E of T){const m=E.closest(oe),O=E.closest(`${oe} > *`);if(m)if(E.parentElement===m)m.appendChild(E);else{if(!O)continue;m.appendChild(O)}else if(E.parentElement===p)p==null||p.appendChild(E);else{if(!O)continue;p==null||p.appendChild(O)}}f.sort((E,m)=>m[1]-E[1]);for(const E of f){const m=_.querySelector(`${G}[${b}="${E[0]}"]`);(L=m==null?void 0:m.parentElement)==null||L.appendChild(m)}return e}function W(){const e=D().find(t=>!t.ariaDisabled);if(!e)return;const o=e.getAttribute(b);if(o)return o}function Q(e,o){const t=e==null?void 0:e.toLowerCase().trim(),r=x;return r?t?r(t,o):0:t?ae(t,o):0}function Ee(){var o;const e=U();e&&(((o=e.parentElement)==null?void 0:o.firstChild)===e&&I().then(()=>{var t,r;return(r=(t=e.closest(G))==null?void 0:t.querySelector(Ue))==null?void 0:r.scrollIntoView({block:"nearest"})}),I().then(()=>e.scrollIntoView({block:"nearest"})))}function D(e){const o=e??document.getElementById(c.root);return o?Array.from(o.querySelectorAll(X)).filter(t=>!!t):[]}function U(e){const o=document.getElementById(c.root);if(!o)return;const t=o.querySelector(`${X}[aria-selected="true"]`);if(t)return t}function B(e){const o=document.getElementById(c.root);if(!o)return;const r=D(o)[e];r&&w("value",r.getAttribute(b)??"")}function F(e){const o=U(),t=D(),r=t.findIndex(_=>_===o);let f=t[r+e];N&&(r+e<0?f=t[t.length-1]:r+e===t.length?f=t[0]:f=t[r+e]),f&&w("value",f.getAttribute(b)??"")}function Z(e){const o=U();let t=o==null?void 0:o.closest(G),r;for(;t&&!r;)t=e>0?Ie(t,G):Ve(t,G),r=t==null?void 0:t.querySelector(X);r?w("value",r.getAttribute(b)??""):F(e)}function z(){return B(D().length-1)}function he(e){e.preventDefault(),e.metaKey?z():e.altKey?Z(1):F(1)}function Se(e){e.preventDefault(),e.metaKey?B(0):e.altKey?Z(-1):F(-1)}function pe(e){switch(e.key){case v.ARROW_DOWN:he(e);break;case v.ARROW_UP:Se(e);break;case v.HOME:e.preventDefault(),B(0);break;case v.END:e.preventDefault(),z();break;case v.ENTER:{e.preventDefault();const o=U();o&&(o==null||o.click())}}}J(le,de);const $={subscribe:u.subscribe,update:u.update,set:u.set,updateState:w};return J(ie,$),{state:$,handleRootKeydown:pe,commandEl:h,ids:c}}function Ie(n,c){let s=n.nextElementSibling;for(;s;){if(s.matches(c))return s;s=s.nextElementSibling}}function Ve(n,c){let s=n.previousElementSibling;for(;s;){if(s.matches(c))return s;s=s.previousElementSibling}}export{Le as I,b as V,Xe as a,He as b,Ye as c,R as d,Je as e,se as f,qe as g,Ke as i};
