import{w as f}from"./CWqQW7tL.js";import{B as m}from"./qLIpCCSV.js";const T=20,c=f([]),t=new Map,o=e=>{if(t.has(e))return;const i=setTimeout(()=>{t.delete(e),l(e)},1e3);t.set(e,i)},g=e=>{const i=t.get(e);i&&clearTimeout(i)};function v(e){e.id&&g(e.id),c.update(i=>i.map(r=>r.id===e.id?{...r,...e}:r))}function b(e){c.update(i=>[e,...i].slice(0,T))}function h(e){m(c).find(i=>i.id===e.id)?v(e):b(e)}function w(e){c.update(i=>(e?o(e):i.forEach(r=>{o(r.id)}),i.map(r=>r.id===e||e===void 0?{...r,visible:!1}:r)))}function l(e){c.update(i=>e===void 0?[]:i.filter(r=>r.id!==e))}const _=e=>typeof e=="function",s=(e,i)=>_(e)?e(i):e,k=(()=>{let e=0;return()=>(e+=1,e.toString())})(),A=(e,i="blank",r)=>({createdAt:Date.now(),visible:!0,type:i,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||k()}),a=e=>(i,r)=>{const u=A(i,e,r);return h(u),u.id},n=(e,i)=>a("blank")(e,i);n.error=a("error");n.success=a("success");n.loading=a("loading");n.custom=a("custom");n.dismiss=e=>{w(e)};n.remove=e=>l(e);n.promise=(e,i,r)=>{const u=n.loading(i.loading,{...r,...r==null?void 0:r.loading});return e.then(d=>(n.success(s(i.success,d),{id:u,...r,...r==null?void 0:r.success}),d)).catch(d=>{n.error(s(i.error,d),{id:u,...r,...r==null?void 0:r.error})}),e};export{n as t};
